{"version":3,"sources":["webpack:///./node_modules/@firebase/storage/dist/index.esm.js","webpack:///../../../src/components/VForm/VForm.ts","webpack:///../../../src/components/VLabel/VLabel.ts","webpack:///../../../src/components/VLabel/index.ts","webpack:///../../../src/components/VMessages/VMessages.ts","webpack:///../../../src/components/VMessages/index.ts","webpack:///../../../src/mixins/validatable/index.ts","webpack:///../../../src/components/VInput/VInput.ts","webpack:///../../../src/components/VInput/index.ts","webpack:///../../../src/components/VCounter/VCounter.ts","webpack:///../../../src/components/VCounter/index.ts","webpack:///../../../src/components/VTextField/VTextField.ts"],"names":["DEFAULT_HOST","CONFIG_STORAGE_BUCKET_KEY","DEFAULT_MAX_OPERATION_RETRY_TIME","DEFAULT_MAX_UPLOAD_RETRY_TIME","MIN_SAFE_INTEGER","FirebaseStorageError","code","message","this","code_","prependCode","message_","serverResponse_","name_","prototype","codeProp","codeEquals","serverResponseProp","setServerResponseProp","serverResponse","Object","defineProperty","get","enumerable","configurable","Code","UNKNOWN","OBJECT_NOT_FOUND","BUCKET_NOT_FOUND","PROJECT_NOT_FOUND","QUOTA_EXCEEDED","UNAUTHENTICATED","UNAUTHORIZED","RETRY_LIMIT_EXCEEDED","INVALID_CHECKSUM","CANCELED","INVALID_EVENT_NAME","INVALID_URL","INVALID_DEFAULT_BUCKET","NO_DEFAULT_BUCKET","CANNOT_SLICE_BLOB","SERVER_FILE_WRONG_SIZE","NO_DOWNLOAD_URL","INVALID_ARGUMENT","INVALID_ARGUMENT_COUNT","APP_DELETED","INVALID_ROOT_OPERATION","INVALID_FORMAT","INTERNAL_ERROR","unknown","objectNotFound","path","quotaExceeded","bucket","unauthenticated","unauthorized","retryLimitExceeded","canceled","invalidUrl","url","invalidDefaultBucket","noDefaultBucket","cannotSliceBlob","serverFileWrongSize","noDownloadURL","invalidArgument","index","fnName","invalidArgumentCount","argMin","argMax","real","countPart","plural","appDeleted","invalidRootOperation","name","invalidFormat","format","internalError","StringFormat","RAW","BASE64","BASE64URL","DATA_URL","formatValidator","stringFormat","StringData","data","contentType","dataFromString","stringData","utf8Bytes_","base64Bytes_","dataURLBytes_","dataURLContentType_","value","b","i","length","c","charCodeAt","push","valid","hi","lo","Uint8Array","percentEncodedBytes_","decoded","decodeURIComponent","e","hasMinus","indexOf","hasUnder","invalidChar","hasPlus","hasSlash","replace","bytes","atob","array","DataURLParts","dataURL","base64","matches","match","middle","endsWith","substring","rest","dataUrl","parts","s","end","longEnough","ErrorCode","TaskEvent","STATE_CHANGED","InternalTaskState","RUNNING","PAUSING","PAUSED","SUCCESS","CANCELING","ERROR","TaskState","taskStateFromInternalTaskState","state","isDef","p","isJustDef","isFunction","isObject","isNonNullObject","isNonArrayObject","Array","isArray","isString","String","isInteger","isNumber","Number","isNativeBlob","isNativeBlobDefined","Blob","NetworkXhrIo","_this","sent_","xhr_","XMLHttpRequest","errorCode_","NO_ERROR","sendPromise_","Promise","resolve","addEventListener","ABORT","NETWORK_ERROR","send","method","body","headers","open","key","hasOwnProperty","setRequestHeader","toString","getErrorCode","getStatus","status","getResponseText","responseText","abort","getResponseHeader","header","addUploadProgressListener","listener","upload","removeUploadProgressListener","removeEventListener","XhrIoPool","createXhrIo","getBlobBuilder","BlobBuilder","WebKitBlobBuilder","getBlob","args","_i","arguments","undefined","bb","append","Error","sliceBlob","blob","start","webkitSlice","mozSlice","slice","FbsBlob","elideCopy","size","blobType","data_","type","ArrayBuffer","byteLength","set","size_","type_","startByte","endByte","realBlob","sliced","buffer","blobby","map","val","apply","uint8Arrays","finalLength_1","forEach","merged_1","index_1","uploadData","Location","path_","fullServerUrl","encode","encodeURIComponent","bucketOnlyServerUrl","makeFromBucketSpec","bucketString","bucketLocation","makeFromUrl","location","bucketDomain","gsModify","loc","charAt","gsPath","gsRegex","RegExp","gsIndices","httpModify","version","hostRegex","httpRegex","httpIndices","groups","regex","indices","postModify","group","captures","exec","bucketValue","pathValue","jsonObjectOrNull","obj","JSON","parse","parent","lastIndexOf","newPath","child","childPath","canonicalChildPath","split","filter","component","join","lastComponent","makeUrl","urlPart","makeQueryString","params","queryPart","nextPart","noXform_","metadata","Mapping","server","local","writable","xform","mappings_","xformPath","fullPath","getMappings","mappings","mappingsXformPath","_metadata","nameMapping","xformSize","sizeMapping","addRef","authWrapper","generateRef","makeStorageReference","fromResource","resource","len","mapping","fromResourceString","resourceString","downloadUrlFromResourceString","tokens","tokensList","urls","token","base","queryString","alt","toResourceString","stringify","metadataValidator","MAX_RESULTS_KEY","MAX_MAX_RESULTS","PAGE_TOKEN_KEY","PREFIXES_KEY","ITEMS_KEY","fromBackendResponse","listResult","prefixes","items","nextPageToken","_a","pathWithoutTrailingSlash","reference","_b","_c","item","fromResponseString","listOptionsValidator","RequestInfo","handler","timeout","urlParams","errorHandler","progressCallback","successCodes","additionalRetryCodes","handlerCheck","cndn","metadataHandler","xhr","text","listHandler","downloadUrlHandler","sharedErrorHandler","err","newErr","objectErrorHandler","shared","getMetadata","maxOperationRetryTime","requestInfo","list","delimiter","pageToken","maxResults","isRoot","getDownloadUrl","updateMetadata","deleteObject","_xhr","_text","determineContentType_","metadataForUpload_","metadataClone","assign","multipartUpload","genBoundary","str","Math","random","boundary","metadata_","metadataString","preBlobPart","postBlobPart","maxUploadRetryTime","ResumableUploadStatus","current","total","finalized","checkResumeHeader_","allowed","allowedStatus","createResumableUpload","metadataForUpload","getResumableUploadStatus","sizeString","isNaN","resumableUploadChunkSize","continueResumableUpload","chunkSize","status_","bytesLeft","bytesToUpload","min","uploadCommand","uploadStatus","newCurrent","Observer","nextOrObserver","error","complete","asFunctions","next","observer","UploadTaskSnapshot","bytesTransferred","totalBytes","task","ref","validate","specs","passed","minArgs","maxArgs","optional","validLength","validator","ArgSpec","self","and_","v1","v2","stringSpec","stringValidator","chainedValidator","uploadDataSpec","metadataSpec","listOptionSpec","nonNegativeNumberSpec","looseObjectSpec","isLooseObjectValidator","isLooseObject","nullFunctionSpec","async","f","argsToForward","then","UploadTask","transferred_","needToFetchStatus_","needToFetchMetadata_","observers_","error_","uploadUrl_","request_","chunkMultiplier_","resolve_","reject_","ref_","authWrapper_","location_","blob_","resumable_","shouldDoResumable_","state_","errorHandler_","completeTransitions_","transition_","metadataErrorHandler_","promise_","reject","start_","makeProgressCallback_","sizeBefore","loaded","updateProgress_","createResumable_","fetchStatus_","fetchMetadata_","continueUpload_","oneShotUpload_","resolveToken_","callback","getAuthToken","authToken","createRequest","makeRequest","getPromise","statusRequest","uploadRequest","newStatus","increaseMultiplier_","currentSize","metadataRequest","multipartRequest","transferred","old","notifyObservers_","cancel","wasPaused","externalState","on","completed","typeValidator","nextOrObserverMessage","nextValidator","observerValidator","nextOrObserverValidator","anyDefined","makeBinder","binder","addObserver_","removeObserver_","binderNextOrObserverValidator","binderSpecs","typeOnly","onFulfilled","onRejected","catch","notifyObserver_","splice","finishPromise_","observers","triggered","bind","snapshot","toCall","resume","pause","Reference","newRef","service","put","throwIfRoot_","putString","delete","listAll","accumulator","listAllHelper","opt","nextPage","label","sent","options","op","getDownloadURL","FailRequest","_appDelete","RequestMap","Map","id","addRequest","request","clear","v","AuthWrapper","app","maker","requestMaker","pool","bucket_","deleted_","app_","extractBucket_","storageRefMaker_","requestMaker_","pool_","service_","maxOperationRetryTime_","maxUploadRetryTime_","requestMap_","config","INTERNAL","getToken","response","accessToken","deleteApp","setMaxUploadRetryTime","time","setMaxOperationRetryTime","waitSeconds","timeoutId","hitTimeout","cancelState","triggeredCallback","triggerCallback","callWithDelay","millis","setTimeout","success","call","waitMillis","mustStop","stopped","stop","wasTimeout","clearTimeout","NetworkRequest","errorCallback","pendingXhr_","backoffId_","canceled_","appDelete_","url_","method_","headers_","body_","successCodes_","additionalRetryCodes_","callback_","errorCallback_","progressCallback_","timeout_","doTheRequest","backoffCallback","RequestEndStatus","progressListener","hitServer","isRetryStatusCode_","successCode","wasCanceled","progressEvent","lengthComputable","backoffDone","requestWentThrough","wasSuccessCode","result","appDelete","isFiveHundredCode","extraRetryCodes","isExtraRetryCode","isRequestSpecificRetryCode","addAuthHeader_","addVersionHeader_","SDK_VERSION","Service","authWrapperBucket","internals_","ServiceInternals","test","refFromURL","STORAGE_TYPE","factory","unused","registerStorage","instance","namespaceExports","Storage","registerService","inheritAttrs","props","lazyValidation","Boolean","inputs","watchers","errorBag","watch","errors","deep","immediate","methods","watchInput","watcher","input","_uid","shouldValidate","reset","resetErrorBag","resetValidation","register","unregister","found","find","unwatch","render","h","staticClass","attrs","novalidate","attrs$","submit","$slots","mixins","functional","absolute","color","default","disabled","focused","for","left","right","class","ctx","style","position","genChildren","$createElement","tag","genMessage","slot","escapedHTML","innerHTML","domProps","setTextColor","themeClasses","errorCount","errorMessages","messages","readonly","rules","successMessages","validateOnBlur","required","errorBucket","hasColor","hasFocused","hasInput","isFocused","isResetting","lazyValue","computed","computedColor","isDark","hasError","internalErrorMessages","hasSuccess","internalSuccessMessages","externalError","hasMessages","validationTarget","hasState","genInternalMessages","internalMessages","internalValue","validations","validationState","newVal","$nextTick","beforeMount","created","form","beforeDestroy","force","rule","console","baseMixins","appendIcon","backgroundColor","dense","height","hideDetails","hint","loading","persistentHint","prependIcon","hasMouseDown","classes","computedId","hasHint","hasLabel","isDirty","isDisabled","isLabelActive","beforeCreate","$options","model","genContent","genControl","genDefaultSlot","genIcon","icon","eventName","dark","light","listeners$","click","cb","mouseup","genInputSlot","setBackgroundColor","mousedown","onMouseUp","genLabel","genMessages","role","scopedSlots","genSlot","genPrependSlot","genAppendSlot","onClick","onMouseDown","max","parseInt","content","isGreater","dirtyTypes","directives","ripple","appendOuterIcon","autofocus","clearable","clearIcon","counter","filled","flat","fullWidth","outlined","placeholder","prefix","prependInnerIcon","reverse","rounded","shaped","singleLine","solo","soloInverted","suffix","badInput","labelWidth","prefixWidth","prependWidth","initialValue","isBooted","isClearing","counterValue","isEnclosed","isSingle","isSolo","labelPosition","offset","labelValue","$vuetify","rtl","showLabel","$attrs","mounted","requestAnimationFrame","focus","blur","window","clearableCallback","$refs","genPrependInnerSlot","genIconSlot","prepend","genClearIcon","genCounter","genFieldset","genLegend","width","span","genInput","listeners","keydown","onKeyDown","genTextFieldSlot","genAffix","onBlur","onFocus","document","$emit","onInput","target","setLabelWidth","scrollWidth","setPrefixWidth","setPrependWidth"],"mappings":"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","file":"js/login~register~upload.b3f75a7c.js","sourcesContent":["import firebase from '@firebase/app';\nimport { __awaiter, __generator, __spreadArrays } from 'tslib';\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Constants used in the Firebase Storage library.\r\n */\r\n/**\r\n * Domain name for firebase storage.\r\n */\r\nvar DEFAULT_HOST = 'firebasestorage.googleapis.com';\r\n/**\r\n * The key in Firebase config json for the storage bucket.\r\n */\r\nvar CONFIG_STORAGE_BUCKET_KEY = 'storageBucket';\r\n/**\r\n * 2 minutes\r\n *\r\n * The timeout for all operations except upload.\r\n */\r\nvar DEFAULT_MAX_OPERATION_RETRY_TIME = 2 * 60 * 1000;\r\n/**\r\n * 10 minutes\r\n *\r\n * The timeout for upload.\r\n */\r\nvar DEFAULT_MAX_UPLOAD_RETRY_TIME = 10 * 60 * 1000;\r\n/**\r\n * This is the value of Number.MIN_SAFE_INTEGER, which is not well supported\r\n * enough for us to use it directly.\r\n */\r\nvar MIN_SAFE_INTEGER = -9007199254740991;\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar FirebaseStorageError = /** @class */ (function () {\r\n    function FirebaseStorageError(code, message) {\r\n        this.code_ = prependCode(code);\r\n        this.message_ = 'Firebase Storage: ' + message;\r\n        this.serverResponse_ = null;\r\n        this.name_ = 'FirebaseError';\r\n    }\r\n    FirebaseStorageError.prototype.codeProp = function () {\r\n        return this.code;\r\n    };\r\n    FirebaseStorageError.prototype.codeEquals = function (code) {\r\n        return prependCode(code) === this.codeProp();\r\n    };\r\n    FirebaseStorageError.prototype.serverResponseProp = function () {\r\n        return this.serverResponse_;\r\n    };\r\n    FirebaseStorageError.prototype.setServerResponseProp = function (serverResponse) {\r\n        this.serverResponse_ = serverResponse;\r\n    };\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"name\", {\r\n        get: function () {\r\n            return this.name_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"code\", {\r\n        get: function () {\r\n            return this.code_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"message\", {\r\n        get: function () {\r\n            return this.message_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FirebaseStorageError.prototype, \"serverResponse\", {\r\n        get: function () {\r\n            return this.serverResponse_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FirebaseStorageError;\r\n}());\r\nvar Code = {\r\n    // Shared between all platforms\r\n    UNKNOWN: 'unknown',\r\n    OBJECT_NOT_FOUND: 'object-not-found',\r\n    BUCKET_NOT_FOUND: 'bucket-not-found',\r\n    PROJECT_NOT_FOUND: 'project-not-found',\r\n    QUOTA_EXCEEDED: 'quota-exceeded',\r\n    UNAUTHENTICATED: 'unauthenticated',\r\n    UNAUTHORIZED: 'unauthorized',\r\n    RETRY_LIMIT_EXCEEDED: 'retry-limit-exceeded',\r\n    INVALID_CHECKSUM: 'invalid-checksum',\r\n    CANCELED: 'canceled',\r\n    // JS specific\r\n    INVALID_EVENT_NAME: 'invalid-event-name',\r\n    INVALID_URL: 'invalid-url',\r\n    INVALID_DEFAULT_BUCKET: 'invalid-default-bucket',\r\n    NO_DEFAULT_BUCKET: 'no-default-bucket',\r\n    CANNOT_SLICE_BLOB: 'cannot-slice-blob',\r\n    SERVER_FILE_WRONG_SIZE: 'server-file-wrong-size',\r\n    NO_DOWNLOAD_URL: 'no-download-url',\r\n    INVALID_ARGUMENT: 'invalid-argument',\r\n    INVALID_ARGUMENT_COUNT: 'invalid-argument-count',\r\n    APP_DELETED: 'app-deleted',\r\n    INVALID_ROOT_OPERATION: 'invalid-root-operation',\r\n    INVALID_FORMAT: 'invalid-format',\r\n    INTERNAL_ERROR: 'internal-error'\r\n};\r\nfunction prependCode(code) {\r\n    return 'storage/' + code;\r\n}\r\nfunction unknown() {\r\n    var message = 'An unknown error occurred, please check the error payload for ' +\r\n        'server response.';\r\n    return new FirebaseStorageError(Code.UNKNOWN, message);\r\n}\r\nfunction objectNotFound(path) {\r\n    return new FirebaseStorageError(Code.OBJECT_NOT_FOUND, \"Object '\" + path + \"' does not exist.\");\r\n}\r\nfunction quotaExceeded(bucket) {\r\n    return new FirebaseStorageError(Code.QUOTA_EXCEEDED, \"Quota for bucket '\" +\r\n        bucket +\r\n        \"' exceeded, please view quota on \" +\r\n        'https://firebase.google.com/pricing/.');\r\n}\r\nfunction unauthenticated() {\r\n    var message = 'User is not authenticated, please authenticate using Firebase ' +\r\n        'Authentication and try again.';\r\n    return new FirebaseStorageError(Code.UNAUTHENTICATED, message);\r\n}\r\nfunction unauthorized(path) {\r\n    return new FirebaseStorageError(Code.UNAUTHORIZED, \"User does not have permission to access '\" + path + \"'.\");\r\n}\r\nfunction retryLimitExceeded() {\r\n    return new FirebaseStorageError(Code.RETRY_LIMIT_EXCEEDED, 'Max retry time for operation exceeded, please try again.');\r\n}\r\nfunction canceled() {\r\n    return new FirebaseStorageError(Code.CANCELED, 'User canceled the upload/download.');\r\n}\r\nfunction invalidUrl(url) {\r\n    return new FirebaseStorageError(Code.INVALID_URL, \"Invalid URL '\" + url + \"'.\");\r\n}\r\nfunction invalidDefaultBucket(bucket) {\r\n    return new FirebaseStorageError(Code.INVALID_DEFAULT_BUCKET, \"Invalid default bucket '\" + bucket + \"'.\");\r\n}\r\nfunction noDefaultBucket() {\r\n    return new FirebaseStorageError(Code.NO_DEFAULT_BUCKET, 'No default bucket ' +\r\n        \"found. Did you set the '\" +\r\n        CONFIG_STORAGE_BUCKET_KEY +\r\n        \"' property when initializing the app?\");\r\n}\r\nfunction cannotSliceBlob() {\r\n    return new FirebaseStorageError(Code.CANNOT_SLICE_BLOB, 'Cannot slice blob for upload. Please retry the upload.');\r\n}\r\nfunction serverFileWrongSize() {\r\n    return new FirebaseStorageError(Code.SERVER_FILE_WRONG_SIZE, 'Server recorded incorrect upload file size, please retry the upload.');\r\n}\r\nfunction noDownloadURL() {\r\n    return new FirebaseStorageError(Code.NO_DOWNLOAD_URL, 'The given file does not have any download URLs.');\r\n}\r\nfunction invalidArgument(index, fnName, message) {\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT, 'Invalid argument in `' + fnName + '` at index ' + index + ': ' + message);\r\n}\r\nfunction invalidArgumentCount(argMin, argMax, fnName, real) {\r\n    var countPart;\r\n    var plural;\r\n    if (argMin === argMax) {\r\n        countPart = argMin;\r\n        plural = argMin === 1 ? 'argument' : 'arguments';\r\n    }\r\n    else {\r\n        countPart = 'between ' + argMin + ' and ' + argMax;\r\n        plural = 'arguments';\r\n    }\r\n    return new FirebaseStorageError(Code.INVALID_ARGUMENT_COUNT, 'Invalid argument count in `' +\r\n        fnName +\r\n        '`: Expected ' +\r\n        countPart +\r\n        ' ' +\r\n        plural +\r\n        ', received ' +\r\n        real +\r\n        '.');\r\n}\r\nfunction appDeleted() {\r\n    return new FirebaseStorageError(Code.APP_DELETED, 'The Firebase app was deleted.');\r\n}\r\n/**\r\n * @param name The name of the operation that was invalid.\r\n */\r\nfunction invalidRootOperation(name) {\r\n    return new FirebaseStorageError(Code.INVALID_ROOT_OPERATION, \"The operation '\" +\r\n        name +\r\n        \"' cannot be performed on a root reference, create a non-root \" +\r\n        \"reference using child, such as .child('file.png').\");\r\n}\r\n/**\r\n * @param format The format that was not valid.\r\n * @param message A message describing the format violation.\r\n */\r\nfunction invalidFormat(format, message) {\r\n    return new FirebaseStorageError(Code.INVALID_FORMAT, \"String does not match format '\" + format + \"': \" + message);\r\n}\r\n/**\r\n * @param message A message describing the internal error.\r\n */\r\nfunction internalError(message) {\r\n    throw new FirebaseStorageError(Code.INTERNAL_ERROR, 'Internal error: ' + message);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar StringFormat = {\r\n    RAW: 'raw',\r\n    BASE64: 'base64',\r\n    BASE64URL: 'base64url',\r\n    DATA_URL: 'data_url'\r\n};\r\nfunction formatValidator(stringFormat) {\r\n    switch (stringFormat) {\r\n        case StringFormat.RAW:\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n        case StringFormat.DATA_URL:\r\n            return;\r\n        default:\r\n            throw 'Expected one of the event types: [' +\r\n                StringFormat.RAW +\r\n                ', ' +\r\n                StringFormat.BASE64 +\r\n                ', ' +\r\n                StringFormat.BASE64URL +\r\n                ', ' +\r\n                StringFormat.DATA_URL +\r\n                '].';\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar StringData = /** @class */ (function () {\r\n    function StringData(data, contentType) {\r\n        this.data = data;\r\n        this.contentType = contentType || null;\r\n    }\r\n    return StringData;\r\n}());\r\nfunction dataFromString(format, stringData) {\r\n    switch (format) {\r\n        case StringFormat.RAW:\r\n            return new StringData(utf8Bytes_(stringData));\r\n        case StringFormat.BASE64:\r\n        case StringFormat.BASE64URL:\r\n            return new StringData(base64Bytes_(format, stringData));\r\n        case StringFormat.DATA_URL:\r\n            return new StringData(dataURLBytes_(stringData), dataURLContentType_(stringData));\r\n        // do nothing\r\n    }\r\n    // assert(false);\r\n    throw unknown();\r\n}\r\nfunction utf8Bytes_(value) {\r\n    var b = [];\r\n    for (var i = 0; i < value.length; i++) {\r\n        var c = value.charCodeAt(i);\r\n        if (c <= 127) {\r\n            b.push(c);\r\n        }\r\n        else {\r\n            if (c <= 2047) {\r\n                b.push(192 | (c >> 6), 128 | (c & 63));\r\n            }\r\n            else {\r\n                if ((c & 64512) === 55296) {\r\n                    // The start of a surrogate pair.\r\n                    var valid = i < value.length - 1 && (value.charCodeAt(i + 1) & 64512) === 56320;\r\n                    if (!valid) {\r\n                        // The second surrogate wasn't there.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        var hi = c;\r\n                        var lo = value.charCodeAt(++i);\r\n                        c = 65536 | ((hi & 1023) << 10) | (lo & 1023);\r\n                        b.push(240 | (c >> 18), 128 | ((c >> 12) & 63), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n                else {\r\n                    if ((c & 64512) === 56320) {\r\n                        // Invalid low surrogate.\r\n                        b.push(239, 191, 189);\r\n                    }\r\n                    else {\r\n                        b.push(224 | (c >> 12), 128 | ((c >> 6) & 63), 128 | (c & 63));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return new Uint8Array(b);\r\n}\r\nfunction percentEncodedBytes_(value) {\r\n    var decoded;\r\n    try {\r\n        decoded = decodeURIComponent(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(StringFormat.DATA_URL, 'Malformed data URL.');\r\n    }\r\n    return utf8Bytes_(decoded);\r\n}\r\nfunction base64Bytes_(format, value) {\r\n    switch (format) {\r\n        case StringFormat.BASE64: {\r\n            var hasMinus = value.indexOf('-') !== -1;\r\n            var hasUnder = value.indexOf('_') !== -1;\r\n            if (hasMinus || hasUnder) {\r\n                var invalidChar = hasMinus ? '-' : '_';\r\n                throw invalidFormat(format, \"Invalid character '\" +\r\n                    invalidChar +\r\n                    \"' found: is it base64url encoded?\");\r\n            }\r\n            break;\r\n        }\r\n        case StringFormat.BASE64URL: {\r\n            var hasPlus = value.indexOf('+') !== -1;\r\n            var hasSlash = value.indexOf('/') !== -1;\r\n            if (hasPlus || hasSlash) {\r\n                var invalidChar = hasPlus ? '+' : '/';\r\n                throw invalidFormat(format, \"Invalid character '\" + invalidChar + \"' found: is it base64 encoded?\");\r\n            }\r\n            value = value.replace(/-/g, '+').replace(/_/g, '/');\r\n            break;\r\n        }\r\n        // do nothing\r\n    }\r\n    var bytes;\r\n    try {\r\n        bytes = atob(value);\r\n    }\r\n    catch (e) {\r\n        throw invalidFormat(format, 'Invalid character found');\r\n    }\r\n    var array = new Uint8Array(bytes.length);\r\n    for (var i = 0; i < bytes.length; i++) {\r\n        array[i] = bytes.charCodeAt(i);\r\n    }\r\n    return array;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar DataURLParts = /** @class */ (function () {\r\n    function DataURLParts(dataURL) {\r\n        this.base64 = false;\r\n        this.contentType = null;\r\n        var matches = dataURL.match(/^data:([^,]+)?,/);\r\n        if (matches === null) {\r\n            throw invalidFormat(StringFormat.DATA_URL, \"Must be formatted 'data:[<mediatype>][;base64],<data>\");\r\n        }\r\n        var middle = matches[1] || null;\r\n        if (middle != null) {\r\n            this.base64 = endsWith(middle, ';base64');\r\n            this.contentType = this.base64\r\n                ? middle.substring(0, middle.length - ';base64'.length)\r\n                : middle;\r\n        }\r\n        this.rest = dataURL.substring(dataURL.indexOf(',') + 1);\r\n    }\r\n    return DataURLParts;\r\n}());\r\nfunction dataURLBytes_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    if (parts.base64) {\r\n        return base64Bytes_(StringFormat.BASE64, parts.rest);\r\n    }\r\n    else {\r\n        return percentEncodedBytes_(parts.rest);\r\n    }\r\n}\r\nfunction dataURLContentType_(dataUrl) {\r\n    var parts = new DataURLParts(dataUrl);\r\n    return parts.contentType;\r\n}\r\nfunction endsWith(s, end) {\r\n    var longEnough = s.length >= end.length;\r\n    if (!longEnough) {\r\n        return false;\r\n    }\r\n    return s.substring(s.length - end.length) === end;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar TaskEvent = {\r\n    /** Triggered whenever the task changes or progress is updated. */\r\n    STATE_CHANGED: 'state_changed'\r\n};\r\nvar InternalTaskState = {\r\n    RUNNING: 'running',\r\n    PAUSING: 'pausing',\r\n    PAUSED: 'paused',\r\n    SUCCESS: 'success',\r\n    CANCELING: 'canceling',\r\n    CANCELED: 'canceled',\r\n    ERROR: 'error'\r\n};\r\nvar TaskState = {\r\n    /** The task is currently transferring data. */\r\n    RUNNING: 'running',\r\n    /** The task was paused by the user. */\r\n    PAUSED: 'paused',\r\n    /** The task completed successfully. */\r\n    SUCCESS: 'success',\r\n    /** The task was canceled. */\r\n    CANCELED: 'canceled',\r\n    /** The task failed with an error. */\r\n    ERROR: 'error'\r\n};\r\nfunction taskStateFromInternalTaskState(state) {\r\n    switch (state) {\r\n        case InternalTaskState.RUNNING:\r\n        case InternalTaskState.PAUSING:\r\n        case InternalTaskState.CANCELING:\r\n            return TaskState.RUNNING;\r\n        case InternalTaskState.PAUSED:\r\n            return TaskState.PAUSED;\r\n        case InternalTaskState.SUCCESS:\r\n            return TaskState.SUCCESS;\r\n        case InternalTaskState.CANCELED:\r\n            return TaskState.CANCELED;\r\n        case InternalTaskState.ERROR:\r\n            return TaskState.ERROR;\r\n        default:\r\n            // TODO(andysoto): assert(false);\r\n            return TaskState.ERROR;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @return False if the object is undefined or null, true otherwise.\r\n */\r\nfunction isDef(p) {\r\n    return p != null;\r\n}\r\nfunction isJustDef(p) {\r\n    return p !== void 0;\r\n}\r\nfunction isFunction(p) {\r\n    return typeof p === 'function';\r\n}\r\nfunction isObject(p) {\r\n    return typeof p === 'object';\r\n}\r\nfunction isNonNullObject(p) {\r\n    return isObject(p) && p !== null;\r\n}\r\nfunction isNonArrayObject(p) {\r\n    return isObject(p) && !Array.isArray(p);\r\n}\r\nfunction isString(p) {\r\n    return typeof p === 'string' || p instanceof String;\r\n}\r\nfunction isInteger(p) {\r\n    return isNumber(p) && Number.isInteger(p);\r\n}\r\nfunction isNumber(p) {\r\n    return typeof p === 'number' || p instanceof Number;\r\n}\r\nfunction isNativeBlob(p) {\r\n    return isNativeBlobDefined() && p instanceof Blob;\r\n}\r\nfunction isNativeBlobDefined() {\r\n    return typeof Blob !== 'undefined';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @enum{number}\r\n */\r\nvar ErrorCode;\r\n(function (ErrorCode) {\r\n    ErrorCode[ErrorCode[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\r\n    ErrorCode[ErrorCode[\"NETWORK_ERROR\"] = 1] = \"NETWORK_ERROR\";\r\n    ErrorCode[ErrorCode[\"ABORT\"] = 2] = \"ABORT\";\r\n})(ErrorCode || (ErrorCode = {}));\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * We use this instead of goog.net.XhrIo because goog.net.XhrIo is hyuuuuge and\r\n * doesn't work in React Native on Android.\r\n */\r\nvar NetworkXhrIo = /** @class */ (function () {\r\n    function NetworkXhrIo() {\r\n        var _this = this;\r\n        this.sent_ = false;\r\n        this.xhr_ = new XMLHttpRequest();\r\n        this.errorCode_ = ErrorCode.NO_ERROR;\r\n        this.sendPromise_ = new Promise(function (resolve) {\r\n            _this.xhr_.addEventListener('abort', function () {\r\n                _this.errorCode_ = ErrorCode.ABORT;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('error', function () {\r\n                _this.errorCode_ = ErrorCode.NETWORK_ERROR;\r\n                resolve(_this);\r\n            });\r\n            _this.xhr_.addEventListener('load', function () {\r\n                resolve(_this);\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.send = function (url, method, body, headers) {\r\n        if (this.sent_) {\r\n            throw internalError('cannot .send() more than once');\r\n        }\r\n        this.sent_ = true;\r\n        this.xhr_.open(method, url, true);\r\n        if (isDef(headers)) {\r\n            for (var key in headers) {\r\n                if (headers.hasOwnProperty(key)) {\r\n                    this.xhr_.setRequestHeader(key, headers[key].toString());\r\n                }\r\n            }\r\n        }\r\n        if (isDef(body)) {\r\n            this.xhr_.send(body);\r\n        }\r\n        else {\r\n            this.xhr_.send();\r\n        }\r\n        return this.sendPromise_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getErrorCode = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getErrorCode() before sending');\r\n        }\r\n        return this.errorCode_;\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getStatus = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getStatus() before sending');\r\n        }\r\n        try {\r\n            return this.xhr_.status;\r\n        }\r\n        catch (e) {\r\n            return -1;\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseText = function () {\r\n        if (!this.sent_) {\r\n            throw internalError('cannot .getResponseText() before sending');\r\n        }\r\n        return this.xhr_.responseText;\r\n    };\r\n    /**\r\n     * Aborts the request.\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.abort = function () {\r\n        this.xhr_.abort();\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.getResponseHeader = function (header) {\r\n        return this.xhr_.getResponseHeader(header);\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.addUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.addEventListener('progress', listener);\r\n        }\r\n    };\r\n    /**\r\n     * @override\r\n     */\r\n    NetworkXhrIo.prototype.removeUploadProgressListener = function (listener) {\r\n        if (isDef(this.xhr_.upload)) {\r\n            this.xhr_.upload.removeEventListener('progress', listener);\r\n        }\r\n    };\r\n    return NetworkXhrIo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Factory-like class for creating XhrIo instances.\r\n */\r\nvar XhrIoPool = /** @class */ (function () {\r\n    function XhrIoPool() {\r\n    }\r\n    XhrIoPool.prototype.createXhrIo = function () {\r\n        return new NetworkXhrIo();\r\n    };\r\n    return XhrIoPool;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getBlobBuilder() {\r\n    if (typeof BlobBuilder !== 'undefined') {\r\n        return BlobBuilder;\r\n    }\r\n    else if (typeof WebKitBlobBuilder !== 'undefined') {\r\n        return WebKitBlobBuilder;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\n/**\r\n * Concatenates one or more values together and converts them to a Blob.\r\n *\r\n * @param args The values that will make up the resulting blob.\r\n * @return The blob.\r\n */\r\nfunction getBlob() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i] = arguments[_i];\r\n    }\r\n    var BlobBuilder = getBlobBuilder();\r\n    if (BlobBuilder !== undefined) {\r\n        var bb = new BlobBuilder();\r\n        for (var i = 0; i < args.length; i++) {\r\n            bb.append(args[i]);\r\n        }\r\n        return bb.getBlob();\r\n    }\r\n    else {\r\n        if (isNativeBlobDefined()) {\r\n            return new Blob(args);\r\n        }\r\n        else {\r\n            throw Error(\"This browser doesn't seem to support creating Blobs\");\r\n        }\r\n    }\r\n}\r\n/**\r\n * Slices the blob. The returned blob contains data from the start byte\r\n * (inclusive) till the end byte (exclusive). Negative indices cannot be used.\r\n *\r\n * @param blob The blob to be sliced.\r\n * @param start Index of the starting byte.\r\n * @param end Index of the ending byte.\r\n * @return The blob slice or null if not supported.\r\n */\r\nfunction sliceBlob(blob, start, end) {\r\n    if (blob.webkitSlice) {\r\n        return blob.webkitSlice(start, end);\r\n    }\r\n    else if (blob.mozSlice) {\r\n        return blob.mozSlice(start, end);\r\n    }\r\n    else if (blob.slice) {\r\n        return blob.slice(start, end);\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param opt_elideCopy If true, doesn't copy mutable input data\r\n *     (e.g. Uint8Arrays). Pass true only if you know the objects will not be\r\n *     modified after this blob's construction.\r\n */\r\nvar FbsBlob = /** @class */ (function () {\r\n    function FbsBlob(data, elideCopy) {\r\n        var size = 0;\r\n        var blobType = '';\r\n        if (isNativeBlob(data)) {\r\n            this.data_ = data;\r\n            size = data.size;\r\n            blobType = data.type;\r\n        }\r\n        else if (data instanceof ArrayBuffer) {\r\n            if (elideCopy) {\r\n                this.data_ = new Uint8Array(data);\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.byteLength);\r\n                this.data_.set(new Uint8Array(data));\r\n            }\r\n            size = this.data_.length;\r\n        }\r\n        else if (data instanceof Uint8Array) {\r\n            if (elideCopy) {\r\n                this.data_ = data;\r\n            }\r\n            else {\r\n                this.data_ = new Uint8Array(data.length);\r\n                this.data_.set(data);\r\n            }\r\n            size = data.length;\r\n        }\r\n        this.size_ = size;\r\n        this.type_ = blobType;\r\n    }\r\n    FbsBlob.prototype.size = function () {\r\n        return this.size_;\r\n    };\r\n    FbsBlob.prototype.type = function () {\r\n        return this.type_;\r\n    };\r\n    FbsBlob.prototype.slice = function (startByte, endByte) {\r\n        if (isNativeBlob(this.data_)) {\r\n            var realBlob = this.data_;\r\n            var sliced = sliceBlob(realBlob, startByte, endByte);\r\n            if (sliced === null) {\r\n                return null;\r\n            }\r\n            return new FbsBlob(sliced);\r\n        }\r\n        else {\r\n            var slice = new Uint8Array(this.data_.buffer, startByte, endByte - startByte);\r\n            return new FbsBlob(slice, true);\r\n        }\r\n    };\r\n    FbsBlob.getBlob = function () {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (isNativeBlobDefined()) {\r\n            var blobby = args.map(function (val) {\r\n                if (val instanceof FbsBlob) {\r\n                    return val.data_;\r\n                }\r\n                else {\r\n                    return val;\r\n                }\r\n            });\r\n            return new FbsBlob(getBlob.apply(null, blobby));\r\n        }\r\n        else {\r\n            var uint8Arrays = args.map(function (val) {\r\n                if (isString(val)) {\r\n                    return dataFromString(StringFormat.RAW, val).data;\r\n                }\r\n                else {\r\n                    // Blobs don't exist, so this has to be a Uint8Array.\r\n                    return val.data_;\r\n                }\r\n            });\r\n            var finalLength_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                finalLength_1 += array.byteLength;\r\n            });\r\n            var merged_1 = new Uint8Array(finalLength_1);\r\n            var index_1 = 0;\r\n            uint8Arrays.forEach(function (array) {\r\n                for (var i = 0; i < array.length; i++) {\r\n                    merged_1[index_1++] = array[i];\r\n                }\r\n            });\r\n            return new FbsBlob(merged_1, true);\r\n        }\r\n    };\r\n    FbsBlob.prototype.uploadData = function () {\r\n        return this.data_;\r\n    };\r\n    return FbsBlob;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Location = /** @class */ (function () {\r\n    function Location(bucket, path) {\r\n        this.bucket = bucket;\r\n        this.path_ = path;\r\n    }\r\n    Object.defineProperty(Location.prototype, \"path\", {\r\n        get: function () {\r\n            return this.path_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Location.prototype, \"isRoot\", {\r\n        get: function () {\r\n            return this.path.length === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Location.prototype.fullServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o/' + encode(this.path);\r\n    };\r\n    Location.prototype.bucketOnlyServerUrl = function () {\r\n        var encode = encodeURIComponent;\r\n        return '/b/' + encode(this.bucket) + '/o';\r\n    };\r\n    Location.makeFromBucketSpec = function (bucketString) {\r\n        var bucketLocation;\r\n        try {\r\n            bucketLocation = Location.makeFromUrl(bucketString);\r\n        }\r\n        catch (e) {\r\n            // Not valid URL, use as-is. This lets you put bare bucket names in\r\n            // config.\r\n            return new Location(bucketString, '');\r\n        }\r\n        if (bucketLocation.path === '') {\r\n            return bucketLocation;\r\n        }\r\n        else {\r\n            throw invalidDefaultBucket(bucketString);\r\n        }\r\n    };\r\n    Location.makeFromUrl = function (url) {\r\n        var location = null;\r\n        var bucketDomain = '([A-Za-z0-9.\\\\-_]+)';\r\n        function gsModify(loc) {\r\n            if (loc.path.charAt(loc.path.length - 1) === '/') {\r\n                loc.path_ = loc.path_.slice(0, -1);\r\n            }\r\n        }\r\n        var gsPath = '(/(.*))?$';\r\n        var path = '(/([^?#]*).*)?$';\r\n        var gsRegex = new RegExp('^gs://' + bucketDomain + gsPath, 'i');\r\n        var gsIndices = { bucket: 1, path: 3 };\r\n        function httpModify(loc) {\r\n            loc.path_ = decodeURIComponent(loc.path);\r\n        }\r\n        var version = 'v[A-Za-z0-9_]+';\r\n        var hostRegex = DEFAULT_HOST.replace(/[.]/g, '\\\\.');\r\n        var httpRegex = new RegExp(\"^https?://\" + hostRegex + \"/\" + version + \"/b/\" + bucketDomain + \"/o\" + path, 'i');\r\n        var httpIndices = { bucket: 1, path: 3 };\r\n        var groups = [\r\n            { regex: gsRegex, indices: gsIndices, postModify: gsModify },\r\n            { regex: httpRegex, indices: httpIndices, postModify: httpModify }\r\n        ];\r\n        for (var i = 0; i < groups.length; i++) {\r\n            var group = groups[i];\r\n            var captures = group.regex.exec(url);\r\n            if (captures) {\r\n                var bucketValue = captures[group.indices.bucket];\r\n                var pathValue = captures[group.indices.path];\r\n                if (!pathValue) {\r\n                    pathValue = '';\r\n                }\r\n                location = new Location(bucketValue, pathValue);\r\n                group.postModify(location);\r\n                break;\r\n            }\r\n        }\r\n        if (location == null) {\r\n            throw invalidUrl(url);\r\n        }\r\n        return location;\r\n    };\r\n    return Location;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the Object resulting from parsing the given JSON, or null if the\r\n * given string does not represent a JSON object.\r\n */\r\nfunction jsonObjectOrNull(s) {\r\n    var obj;\r\n    try {\r\n        obj = JSON.parse(s);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n    if (isNonArrayObject(obj)) {\r\n        return obj;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Contains helper methods for manipulating paths.\r\n */\r\n/**\r\n * @return Null if the path is already at the root.\r\n */\r\nfunction parent(path) {\r\n    if (path.length === 0) {\r\n        return null;\r\n    }\r\n    var index = path.lastIndexOf('/');\r\n    if (index === -1) {\r\n        return '';\r\n    }\r\n    var newPath = path.slice(0, index);\r\n    return newPath;\r\n}\r\nfunction child(path, childPath) {\r\n    var canonicalChildPath = childPath\r\n        .split('/')\r\n        .filter(function (component) { return component.length > 0; })\r\n        .join('/');\r\n    if (path.length === 0) {\r\n        return canonicalChildPath;\r\n    }\r\n    else {\r\n        return path + '/' + canonicalChildPath;\r\n    }\r\n}\r\n/**\r\n * Returns the last component of a path.\r\n * '/foo/bar' -> 'bar'\r\n * '/foo/bar/baz/' -> 'baz/'\r\n * '/a' -> 'a'\r\n */\r\nfunction lastComponent(path) {\r\n    var index = path.lastIndexOf('/', path.length - 2);\r\n    if (index === -1) {\r\n        return path;\r\n    }\r\n    else {\r\n        return path.slice(index + 1);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction makeUrl(urlPart) {\r\n    return \"https://\" + DEFAULT_HOST + \"/v0\" + urlPart;\r\n}\r\nfunction makeQueryString(params) {\r\n    var encode = encodeURIComponent;\r\n    var queryPart = '?';\r\n    for (var key in params) {\r\n        if (params.hasOwnProperty(key)) {\r\n            // @ts-ignore TODO: remove once typescript is upgraded to 3.5.x\r\n            var nextPart = encode(key) + '=' + encode(params[key]);\r\n            queryPart = queryPart + nextPart + '&';\r\n        }\r\n    }\r\n    // Chop off the extra '&' or '?' on the end\r\n    queryPart = queryPart.slice(0, -1);\r\n    return queryPart;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction noXform_(metadata, value) {\r\n    return value;\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar Mapping = /** @class */ (function () {\r\n    function Mapping(server, local, writable, xform) {\r\n        this.server = server;\r\n        this.local = local || server;\r\n        this.writable = !!writable;\r\n        this.xform = xform || noXform_;\r\n    }\r\n    return Mapping;\r\n}());\r\nvar mappings_ = null;\r\nfunction xformPath(fullPath) {\r\n    if (!isString(fullPath) || fullPath.length < 2) {\r\n        return fullPath;\r\n    }\r\n    else {\r\n        return lastComponent(fullPath);\r\n    }\r\n}\r\nfunction getMappings() {\r\n    if (mappings_) {\r\n        return mappings_;\r\n    }\r\n    var mappings = [];\r\n    mappings.push(new Mapping('bucket'));\r\n    mappings.push(new Mapping('generation'));\r\n    mappings.push(new Mapping('metageneration'));\r\n    mappings.push(new Mapping('name', 'fullPath', true));\r\n    function mappingsXformPath(_metadata, fullPath) {\r\n        return xformPath(fullPath);\r\n    }\r\n    var nameMapping = new Mapping('name');\r\n    nameMapping.xform = mappingsXformPath;\r\n    mappings.push(nameMapping);\r\n    /**\r\n     * Coerces the second param to a number, if it is defined.\r\n     */\r\n    function xformSize(_metadata, size) {\r\n        if (isDef(size)) {\r\n            return Number(size);\r\n        }\r\n        else {\r\n            return size;\r\n        }\r\n    }\r\n    var sizeMapping = new Mapping('size');\r\n    sizeMapping.xform = xformSize;\r\n    mappings.push(sizeMapping);\r\n    mappings.push(new Mapping('timeCreated'));\r\n    mappings.push(new Mapping('updated'));\r\n    mappings.push(new Mapping('md5Hash', null, true));\r\n    mappings.push(new Mapping('cacheControl', null, true));\r\n    mappings.push(new Mapping('contentDisposition', null, true));\r\n    mappings.push(new Mapping('contentEncoding', null, true));\r\n    mappings.push(new Mapping('contentLanguage', null, true));\r\n    mappings.push(new Mapping('contentType', null, true));\r\n    mappings.push(new Mapping('metadata', 'customMetadata', true));\r\n    mappings_ = mappings;\r\n    return mappings_;\r\n}\r\nfunction addRef(metadata, authWrapper) {\r\n    function generateRef() {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var loc = new Location(bucket, path);\r\n        return authWrapper.makeStorageReference(loc);\r\n    }\r\n    Object.defineProperty(metadata, 'ref', { get: generateRef });\r\n}\r\nfunction fromResource(authWrapper, resource, mappings) {\r\n    var metadata = {};\r\n    metadata['type'] = 'file';\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        metadata[mapping.local] = mapping.xform(metadata, resource[mapping.server]);\r\n    }\r\n    addRef(metadata, authWrapper);\r\n    return metadata;\r\n}\r\nfunction fromResourceString(authWrapper, resourceString, mappings) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromResource(authWrapper, resource, mappings);\r\n}\r\nfunction downloadUrlFromResourceString(metadata, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    if (!isString(obj['downloadTokens'])) {\r\n        // This can happen if objects are uploaded through GCS and retrieved\r\n        // through list, so we don't want to throw an Error.\r\n        return null;\r\n    }\r\n    var tokens = obj['downloadTokens'];\r\n    if (tokens.length === 0) {\r\n        return null;\r\n    }\r\n    var encode = encodeURIComponent;\r\n    var tokensList = tokens.split(',');\r\n    var urls = tokensList.map(function (token) {\r\n        var bucket = metadata['bucket'];\r\n        var path = metadata['fullPath'];\r\n        var urlPart = '/b/' + encode(bucket) + '/o/' + encode(path);\r\n        var base = makeUrl(urlPart);\r\n        var queryString = makeQueryString({\r\n            alt: 'media',\r\n            token: token\r\n        });\r\n        return base + queryString;\r\n    });\r\n    return urls[0];\r\n}\r\nfunction toResourceString(metadata, mappings) {\r\n    var resource = {};\r\n    var len = mappings.length;\r\n    for (var i = 0; i < len; i++) {\r\n        var mapping = mappings[i];\r\n        if (mapping.writable) {\r\n            resource[mapping.server] = metadata[mapping.local];\r\n        }\r\n    }\r\n    return JSON.stringify(resource);\r\n}\r\nfunction metadataValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected Metadata object.';\r\n    }\r\n    for (var key in p) {\r\n        if (p.hasOwnProperty(key)) {\r\n            var val = p[key];\r\n            if (key === 'customMetadata') {\r\n                if (!isObject(val)) {\r\n                    throw 'Expected object for \\'customMetadata\\' mapping.';\r\n                }\r\n            }\r\n            else {\r\n                if (isNonNullObject(val)) {\r\n                    throw \"Mapping for '\" + key + \"' cannot be an object.\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nvar MAX_RESULTS_KEY = 'maxResults';\r\nvar MAX_MAX_RESULTS = 1000;\r\nvar PAGE_TOKEN_KEY = 'pageToken';\r\nvar PREFIXES_KEY = 'prefixes';\r\nvar ITEMS_KEY = 'items';\r\nfunction fromBackendResponse(authWrapper, resource) {\r\n    var listResult = {\r\n        prefixes: [],\r\n        items: [],\r\n        nextPageToken: resource['nextPageToken']\r\n    };\r\n    var bucket = authWrapper.bucket();\r\n    if (bucket === null) {\r\n        throw noDefaultBucket();\r\n    }\r\n    if (resource[PREFIXES_KEY]) {\r\n        for (var _i = 0, _a = resource[PREFIXES_KEY]; _i < _a.length; _i++) {\r\n            var path = _a[_i];\r\n            var pathWithoutTrailingSlash = path.replace(/\\/$/, '');\r\n            var reference = authWrapper.makeStorageReference(new Location(bucket, pathWithoutTrailingSlash));\r\n            listResult.prefixes.push(reference);\r\n        }\r\n    }\r\n    if (resource[ITEMS_KEY]) {\r\n        for (var _b = 0, _c = resource[ITEMS_KEY]; _b < _c.length; _b++) {\r\n            var item = _c[_b];\r\n            var reference = authWrapper.makeStorageReference(new Location(bucket, item['name']));\r\n            listResult.items.push(reference);\r\n        }\r\n    }\r\n    return listResult;\r\n}\r\nfunction fromResponseString(authWrapper, resourceString) {\r\n    var obj = jsonObjectOrNull(resourceString);\r\n    if (obj === null) {\r\n        return null;\r\n    }\r\n    var resource = obj;\r\n    return fromBackendResponse(authWrapper, resource);\r\n}\r\nfunction listOptionsValidator(p) {\r\n    if (!isObject(p) || !p) {\r\n        throw 'Expected ListOptions object.';\r\n    }\r\n    for (var key in p) {\r\n        if (key === MAX_RESULTS_KEY) {\r\n            if (!isInteger(p[MAX_RESULTS_KEY]) ||\r\n                p[MAX_RESULTS_KEY] <= 0) {\r\n                throw 'Expected maxResults to be a positive number.';\r\n            }\r\n            if (p[MAX_RESULTS_KEY] > 1000) {\r\n                throw \"Expected maxResults to be less than or equal to \" + MAX_MAX_RESULTS + \".\";\r\n            }\r\n        }\r\n        else if (key === PAGE_TOKEN_KEY) {\r\n            if (p[PAGE_TOKEN_KEY] && !isString(p[PAGE_TOKEN_KEY])) {\r\n                throw 'Expected pageToken to be string.';\r\n            }\r\n        }\r\n        else {\r\n            throw 'Unknown option: ' + key;\r\n        }\r\n    }\r\n}\n\nvar RequestInfo = /** @class */ (function () {\r\n    function RequestInfo(url, method, \r\n    /**\r\n     * Returns the value with which to resolve the request's promise. Only called\r\n     * if the request is successful. Throw from this function to reject the\r\n     * returned Request's promise with the thrown error.\r\n     * Note: The XhrIo passed to this function may be reused after this callback\r\n     * returns. Do not keep a reference to it in any way.\r\n     */\r\n    handler, timeout) {\r\n        this.url = url;\r\n        this.method = method;\r\n        this.handler = handler;\r\n        this.timeout = timeout;\r\n        this.urlParams = {};\r\n        this.headers = {};\r\n        this.body = null;\r\n        this.errorHandler = null;\r\n        /**\r\n         * Called with the current number of bytes uploaded and total size (-1 if not\r\n         * computable) of the request body (i.e. used to report upload progress).\r\n         */\r\n        this.progressCallback = null;\r\n        this.successCodes = [200];\r\n        this.additionalRetryCodes = [];\r\n    }\r\n    return RequestInfo;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws the UNKNOWN FirebaseStorageError if cndn is false.\r\n */\r\nfunction handlerCheck(cndn) {\r\n    if (!cndn) {\r\n        throw unknown();\r\n    }\r\n}\r\nfunction metadataHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return metadata;\r\n    }\r\n    return handler;\r\n}\r\nfunction listHandler(authWrapper) {\r\n    function handler(xhr, text) {\r\n        var listResult = fromResponseString(authWrapper, text);\r\n        handlerCheck(listResult !== null);\r\n        return listResult;\r\n    }\r\n    return handler;\r\n}\r\nfunction downloadUrlHandler(authWrapper, mappings) {\r\n    function handler(xhr, text) {\r\n        var metadata = fromResourceString(authWrapper, text, mappings);\r\n        handlerCheck(metadata !== null);\r\n        return downloadUrlFromResourceString(metadata, text);\r\n    }\r\n    return handler;\r\n}\r\nfunction sharedErrorHandler(location) {\r\n    function errorHandler(xhr, err) {\r\n        var newErr;\r\n        if (xhr.getStatus() === 401) {\r\n            newErr = unauthenticated();\r\n        }\r\n        else {\r\n            if (xhr.getStatus() === 402) {\r\n                newErr = quotaExceeded(location.bucket);\r\n            }\r\n            else {\r\n                if (xhr.getStatus() === 403) {\r\n                    newErr = unauthorized(location.path);\r\n                }\r\n                else {\r\n                    newErr = err;\r\n                }\r\n            }\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction objectErrorHandler(location) {\r\n    var shared = sharedErrorHandler(location);\r\n    function errorHandler(xhr, err) {\r\n        var newErr = shared(xhr, err);\r\n        if (xhr.getStatus() === 404) {\r\n            newErr = objectNotFound(location.path);\r\n        }\r\n        newErr.setServerResponseProp(err.serverResponseProp());\r\n        return newErr;\r\n    }\r\n    return errorHandler;\r\n}\r\nfunction getMetadata(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction list(authWrapper, location, delimiter, pageToken, maxResults) {\r\n    var urlParams = {};\r\n    if (location.isRoot) {\r\n        urlParams['prefix'] = '';\r\n    }\r\n    else {\r\n        urlParams['prefix'] = location.path + '/';\r\n    }\r\n    if (delimiter && delimiter.length > 0) {\r\n        urlParams['delimiter'] = delimiter;\r\n    }\r\n    if (pageToken) {\r\n        urlParams['pageToken'] = pageToken;\r\n    }\r\n    if (maxResults) {\r\n        urlParams['maxResults'] = maxResults;\r\n    }\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, listHandler(authWrapper), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction getDownloadUrl(authWrapper, location, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'GET';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, downloadUrlHandler(authWrapper, mappings), timeout);\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction updateMetadata(authWrapper, location, metadata, mappings) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'PATCH';\r\n    var body = toResourceString(metadata, mappings);\r\n    var headers = { 'Content-Type': 'application/json; charset=utf-8' };\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction deleteObject(authWrapper, location) {\r\n    var urlPart = location.fullServerUrl();\r\n    var url = makeUrl(urlPart);\r\n    var method = 'DELETE';\r\n    var timeout = authWrapper.maxOperationRetryTime();\r\n    function handler(_xhr, _text) { }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.successCodes = [200, 204];\r\n    requestInfo.errorHandler = objectErrorHandler(location);\r\n    return requestInfo;\r\n}\r\nfunction determineContentType_(metadata, blob) {\r\n    return ((metadata && metadata['contentType']) ||\r\n        (blob && blob.type()) ||\r\n        'application/octet-stream');\r\n}\r\nfunction metadataForUpload_(location, blob, metadata) {\r\n    var metadataClone = Object.assign({}, metadata);\r\n    metadataClone['fullPath'] = location.path;\r\n    metadataClone['size'] = blob.size();\r\n    if (!metadataClone['contentType']) {\r\n        metadataClone['contentType'] = determineContentType_(null, blob);\r\n    }\r\n    return metadataClone;\r\n}\r\nfunction multipartUpload(authWrapper, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'multipart'\r\n    };\r\n    function genBoundary() {\r\n        var str = '';\r\n        for (var i = 0; i < 2; i++) {\r\n            str =\r\n                str +\r\n                    Math.random()\r\n                        .toString()\r\n                        .slice(2);\r\n        }\r\n        return str;\r\n    }\r\n    var boundary = genBoundary();\r\n    headers['Content-Type'] = 'multipart/related; boundary=' + boundary;\r\n    var metadata_ = metadataForUpload_(location, blob, metadata);\r\n    var metadataString = toResourceString(metadata_, mappings);\r\n    var preBlobPart = '--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: application/json; charset=utf-8\\r\\n\\r\\n' +\r\n        metadataString +\r\n        '\\r\\n--' +\r\n        boundary +\r\n        '\\r\\n' +\r\n        'Content-Type: ' +\r\n        metadata_['contentType'] +\r\n        '\\r\\n\\r\\n';\r\n    var postBlobPart = '\\r\\n--' + boundary + '--';\r\n    var body = FbsBlob.getBlob(preBlobPart, blob, postBlobPart);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    var urlParams = { name: metadata_['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, metadataHandler(authWrapper, mappings), timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param current The number of bytes that have been uploaded so far.\r\n * @param total The total number of bytes in the upload.\r\n * @param opt_finalized True if the server has finished the upload.\r\n * @param opt_metadata The upload metadata, should\r\n *     only be passed if opt_finalized is true.\r\n * @struct\r\n */\r\nvar ResumableUploadStatus = /** @class */ (function () {\r\n    function ResumableUploadStatus(current, total, finalized, metadata) {\r\n        this.current = current;\r\n        this.total = total;\r\n        this.finalized = !!finalized;\r\n        this.metadata = metadata || null;\r\n    }\r\n    return ResumableUploadStatus;\r\n}());\r\nfunction checkResumeHeader_(xhr, allowed) {\r\n    var status = null;\r\n    try {\r\n        status = xhr.getResponseHeader('X-Goog-Upload-Status');\r\n    }\r\n    catch (e) {\r\n        handlerCheck(false);\r\n    }\r\n    var allowedStatus = allowed || ['active'];\r\n    handlerCheck(!!status && allowedStatus.indexOf(status) !== -1);\r\n    return status;\r\n}\r\nfunction createResumableUpload(authWrapper, location, mappings, blob, metadata) {\r\n    var urlPart = location.bucketOnlyServerUrl();\r\n    var metadataForUpload = metadataForUpload_(location, blob, metadata);\r\n    var urlParams = { name: metadataForUpload['fullPath'] };\r\n    var url = makeUrl(urlPart);\r\n    var method = 'POST';\r\n    var headers = {\r\n        'X-Goog-Upload-Protocol': 'resumable',\r\n        'X-Goog-Upload-Command': 'start',\r\n        'X-Goog-Upload-Header-Content-Length': blob.size(),\r\n        'X-Goog-Upload-Header-Content-Type': metadataForUpload['contentType'],\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    };\r\n    var body = toResourceString(metadataForUpload, mappings);\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    function handler(xhr) {\r\n        checkResumeHeader_(xhr);\r\n        var url;\r\n        try {\r\n            url = xhr.getResponseHeader('X-Goog-Upload-URL');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        handlerCheck(isString(url));\r\n        return url;\r\n    }\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.urlParams = urlParams;\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n */\r\nfunction getResumableUploadStatus(authWrapper, location, url, blob) {\r\n    var headers = { 'X-Goog-Upload-Command': 'query' };\r\n    function handler(xhr) {\r\n        var status = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var sizeString = null;\r\n        try {\r\n            sizeString = xhr.getResponseHeader('X-Goog-Upload-Size-Received');\r\n        }\r\n        catch (e) {\r\n            handlerCheck(false);\r\n        }\r\n        if (!sizeString) {\r\n            // null or empty string\r\n            handlerCheck(false);\r\n        }\r\n        var size = Number(sizeString);\r\n        handlerCheck(!isNaN(size));\r\n        return new ResumableUploadStatus(size, blob.size(), status === 'final');\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\r\n/**\r\n * Any uploads via the resumable upload API must transfer a number of bytes\r\n * that is a multiple of this number.\r\n */\r\nvar resumableUploadChunkSize = 256 * 1024;\r\n/**\r\n * @param url From a call to fbs.requests.createResumableUpload.\r\n * @param chunkSize Number of bytes to upload.\r\n * @param status The previous status.\r\n *     If not passed or null, we start from the beginning.\r\n * @throws fbs.Error If the upload is already complete, the passed in status\r\n *     has a final size inconsistent with the blob, or the blob cannot be sliced\r\n *     for upload.\r\n */\r\nfunction continueResumableUpload(location, authWrapper, url, blob, chunkSize, mappings, status, progressCallback) {\r\n    // TODO(andysoto): standardize on internal asserts\r\n    // assert(!(opt_status && opt_status.finalized));\r\n    var status_ = new ResumableUploadStatus(0, 0);\r\n    if (status) {\r\n        status_.current = status.current;\r\n        status_.total = status.total;\r\n    }\r\n    else {\r\n        status_.current = 0;\r\n        status_.total = blob.size();\r\n    }\r\n    if (blob.size() !== status_.total) {\r\n        throw serverFileWrongSize();\r\n    }\r\n    var bytesLeft = status_.total - status_.current;\r\n    var bytesToUpload = bytesLeft;\r\n    if (chunkSize > 0) {\r\n        bytesToUpload = Math.min(bytesToUpload, chunkSize);\r\n    }\r\n    var startByte = status_.current;\r\n    var endByte = startByte + bytesToUpload;\r\n    var uploadCommand = bytesToUpload === bytesLeft ? 'upload, finalize' : 'upload';\r\n    var headers = {\r\n        'X-Goog-Upload-Command': uploadCommand,\r\n        'X-Goog-Upload-Offset': status_.current\r\n    };\r\n    var body = blob.slice(startByte, endByte);\r\n    if (body === null) {\r\n        throw cannotSliceBlob();\r\n    }\r\n    function handler(xhr, text) {\r\n        // TODO(andysoto): Verify the MD5 of each uploaded range:\r\n        // the 'x-range-md5' header comes back with status code 308 responses.\r\n        // We'll only be able to bail out though, because you can't re-upload a\r\n        // range that you previously uploaded.\r\n        var uploadStatus = checkResumeHeader_(xhr, ['active', 'final']);\r\n        var newCurrent = status_.current + bytesToUpload;\r\n        var size = blob.size();\r\n        var metadata;\r\n        if (uploadStatus === 'final') {\r\n            metadata = metadataHandler(authWrapper, mappings)(xhr, text);\r\n        }\r\n        else {\r\n            metadata = null;\r\n        }\r\n        return new ResumableUploadStatus(newCurrent, size, uploadStatus === 'final', metadata);\r\n    }\r\n    var method = 'POST';\r\n    var timeout = authWrapper.maxUploadRetryTime();\r\n    var requestInfo = new RequestInfo(url, method, handler, timeout);\r\n    requestInfo.headers = headers;\r\n    requestInfo.body = body.uploadData();\r\n    requestInfo.progressCallback = progressCallback || null;\r\n    requestInfo.errorHandler = sharedErrorHandler(location);\r\n    return requestInfo;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n */\r\nvar Observer = /** @class */ (function () {\r\n    function Observer(nextOrObserver, error, complete) {\r\n        var asFunctions = isFunction(nextOrObserver) ||\r\n            isDef(error) ||\r\n            isDef(complete);\r\n        if (asFunctions) {\r\n            this.next = nextOrObserver;\r\n            this.error = error || null;\r\n            this.complete = complete || null;\r\n        }\r\n        else {\r\n            var observer = nextOrObserver;\r\n            this.next = observer.next || null;\r\n            this.error = observer.error || null;\r\n            this.complete = observer.complete || null;\r\n        }\r\n    }\r\n    return Observer;\r\n}());\n\nvar UploadTaskSnapshot = /** @class */ (function () {\r\n    function UploadTaskSnapshot(bytesTransferred, totalBytes, state, metadata, task, ref) {\r\n        this.bytesTransferred = bytesTransferred;\r\n        this.totalBytes = totalBytes;\r\n        this.state = state;\r\n        this.metadata = metadata;\r\n        this.task = task;\r\n        this.ref = ref;\r\n    }\r\n    return UploadTaskSnapshot;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param name Name of the function.\r\n * @param specs Argument specs.\r\n * @param passed The actual arguments passed to the function.\r\n * @throws {fbs.Error} If the arguments are invalid.\r\n */\r\nfunction validate(name, specs, passed) {\r\n    var minArgs = specs.length;\r\n    var maxArgs = specs.length;\r\n    for (var i = 0; i < specs.length; i++) {\r\n        if (specs[i].optional) {\r\n            minArgs = i;\r\n            break;\r\n        }\r\n    }\r\n    var validLength = minArgs <= passed.length && passed.length <= maxArgs;\r\n    if (!validLength) {\r\n        throw invalidArgumentCount(minArgs, maxArgs, name, passed.length);\r\n    }\r\n    for (var i = 0; i < passed.length; i++) {\r\n        try {\r\n            specs[i].validator(passed[i]);\r\n        }\r\n        catch (e) {\r\n            if (e instanceof Error) {\r\n                throw invalidArgument(i, name, e.message);\r\n            }\r\n            else {\r\n                throw invalidArgument(i, name, e);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * @struct\r\n */\r\nvar ArgSpec = /** @class */ (function () {\r\n    function ArgSpec(validator, optional) {\r\n        var self = this;\r\n        this.validator = function (p) {\r\n            if (self.optional && !isJustDef(p)) {\r\n                return;\r\n            }\r\n            validator(p);\r\n        };\r\n        this.optional = !!optional;\r\n    }\r\n    return ArgSpec;\r\n}());\r\nfunction and_(v1, v2) {\r\n    return function (p) {\r\n        v1(p);\r\n        v2(p);\r\n    };\r\n}\r\nfunction stringSpec(validator, optional) {\r\n    function stringValidator(p) {\r\n        if (!isString(p)) {\r\n            throw 'Expected string.';\r\n        }\r\n    }\r\n    var chainedValidator;\r\n    if (validator) {\r\n        chainedValidator = and_(stringValidator, validator);\r\n    }\r\n    else {\r\n        chainedValidator = stringValidator;\r\n    }\r\n    return new ArgSpec(chainedValidator, optional);\r\n}\r\nfunction uploadDataSpec() {\r\n    function validator(p) {\r\n        var valid = p instanceof Uint8Array ||\r\n            p instanceof ArrayBuffer ||\r\n            (isNativeBlobDefined() && p instanceof Blob);\r\n        if (!valid) {\r\n            throw 'Expected Blob or File.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction metadataSpec(optional) {\r\n    return new ArgSpec(metadataValidator, optional);\r\n}\r\nfunction listOptionSpec(optional) {\r\n    return new ArgSpec(listOptionsValidator, optional);\r\n}\r\nfunction nonNegativeNumberSpec() {\r\n    function validator(p) {\r\n        var valid = isNumber(p) && p >= 0;\r\n        if (!valid) {\r\n            throw 'Expected a number 0 or greater.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator);\r\n}\r\nfunction looseObjectSpec(validator, optional) {\r\n    function isLooseObjectValidator(p) {\r\n        var isLooseObject = p === null || (isDef(p) && p instanceof Object);\r\n        if (!isLooseObject) {\r\n            throw 'Expected an Object.';\r\n        }\r\n        if (validator !== undefined && validator !== null) {\r\n            validator(p);\r\n        }\r\n    }\r\n    return new ArgSpec(isLooseObjectValidator, optional);\r\n}\r\nfunction nullFunctionSpec(optional) {\r\n    function validator(p) {\r\n        var valid = p === null || isFunction(p);\r\n        if (!valid) {\r\n            throw 'Expected a Function.';\r\n        }\r\n    }\r\n    return new ArgSpec(validator, optional);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a function that invokes f with its arguments asynchronously as a\r\n * microtask, i.e. as soon as possible after the current script returns back\r\n * into browser code.\r\n */\r\nfunction async(f) {\r\n    return function () {\r\n        var argsToForward = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            argsToForward[_i] = arguments[_i];\r\n        }\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        Promise.resolve().then(function () { return f.apply(void 0, argsToForward); });\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Represents a blob being uploaded. Can be used to pause/resume/cancel the\r\n * upload and manage callbacks for various events.\r\n */\r\nvar UploadTask = /** @class */ (function () {\r\n    /**\r\n     * @param ref The firebaseStorage.Reference object this task came\r\n     *     from, untyped to avoid cyclic dependencies.\r\n     * @param blob The blob to upload.\r\n     */\r\n    function UploadTask(ref, authWrapper, location, mappings, blob, metadata) {\r\n        var _this = this;\r\n        if (metadata === void 0) { metadata = null; }\r\n        this.transferred_ = 0;\r\n        this.needToFetchStatus_ = false;\r\n        this.needToFetchMetadata_ = false;\r\n        this.observers_ = [];\r\n        this.error_ = null;\r\n        this.uploadUrl_ = null;\r\n        this.request_ = null;\r\n        this.chunkMultiplier_ = 1;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.ref_ = ref;\r\n        this.authWrapper_ = authWrapper;\r\n        this.location_ = location;\r\n        this.blob_ = blob;\r\n        this.metadata_ = metadata;\r\n        this.mappings_ = mappings;\r\n        this.resumable_ = this.shouldDoResumable_(this.blob_);\r\n        this.state_ = InternalTaskState.RUNNING;\r\n        this.errorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            _this.chunkMultiplier_ = 1;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.needToFetchStatus_ = true;\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.metadataErrorHandler_ = function (error) {\r\n            _this.request_ = null;\r\n            if (error.codeEquals(Code.CANCELED)) {\r\n                _this.completeTransitions_();\r\n            }\r\n            else {\r\n                _this.error_ = error;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n            }\r\n        };\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n        // Prevent uncaught rejections on the internal promise from bubbling out\r\n        // to the top level with a dummy handler.\r\n        this.promise_.then(null, function () { });\r\n    }\r\n    UploadTask.prototype.makeProgressCallback_ = function () {\r\n        var _this = this;\r\n        var sizeBefore = this.transferred_;\r\n        return function (loaded) { return _this.updateProgress_(sizeBefore + loaded); };\r\n    };\r\n    UploadTask.prototype.shouldDoResumable_ = function (blob) {\r\n        return blob.size() > 256 * 1024;\r\n    };\r\n    UploadTask.prototype.start_ = function () {\r\n        if (this.state_ !== InternalTaskState.RUNNING) {\r\n            // This can happen if someone pauses us in a resume callback, for example.\r\n            return;\r\n        }\r\n        if (this.request_ !== null) {\r\n            return;\r\n        }\r\n        if (this.resumable_) {\r\n            if (this.uploadUrl_ === null) {\r\n                this.createResumable_();\r\n            }\r\n            else {\r\n                if (this.needToFetchStatus_) {\r\n                    this.fetchStatus_();\r\n                }\r\n                else {\r\n                    if (this.needToFetchMetadata_) {\r\n                        // Happens if we miss the metadata on upload completion.\r\n                        this.fetchMetadata_();\r\n                    }\r\n                    else {\r\n                        this.continueUpload_();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.oneShotUpload_();\r\n        }\r\n    };\r\n    UploadTask.prototype.resolveToken_ = function (callback) {\r\n        var _this = this;\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.authWrapper_.getAuthToken().then(function (authToken) {\r\n            switch (_this.state_) {\r\n                case InternalTaskState.RUNNING:\r\n                    callback(authToken);\r\n                    break;\r\n                case InternalTaskState.CANCELING:\r\n                    _this.transition_(InternalTaskState.CANCELED);\r\n                    break;\r\n                case InternalTaskState.PAUSING:\r\n                    _this.transition_(InternalTaskState.PAUSED);\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n    // TODO(andysoto): assert false\r\n    UploadTask.prototype.createResumable_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = createResumableUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var createRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = createRequest;\r\n            createRequest.getPromise().then(function (url) {\r\n                _this.request_ = null;\r\n                _this.uploadUrl_ = url;\r\n                _this.needToFetchStatus_ = false;\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.fetchStatus_ = function () {\r\n        var _this = this;\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getResumableUploadStatus(_this.authWrapper_, _this.location_, url, _this.blob_);\r\n            var statusRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = statusRequest;\r\n            statusRequest.getPromise().then(function (status) {\r\n                status = status;\r\n                _this.request_ = null;\r\n                _this.updateProgress_(status.current);\r\n                _this.needToFetchStatus_ = false;\r\n                if (status.finalized) {\r\n                    _this.needToFetchMetadata_ = true;\r\n                }\r\n                _this.completeTransitions_();\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.continueUpload_ = function () {\r\n        var _this = this;\r\n        var chunkSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        var status = new ResumableUploadStatus(this.transferred_, this.blob_.size());\r\n        // TODO(andysoto): assert(this.uploadUrl_ !== null);\r\n        var url = this.uploadUrl_;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo;\r\n            try {\r\n                requestInfo = continueResumableUpload(_this.location_, _this.authWrapper_, url, _this.blob_, chunkSize, _this.mappings_, status, _this.makeProgressCallback_());\r\n            }\r\n            catch (e) {\r\n                _this.error_ = e;\r\n                _this.transition_(InternalTaskState.ERROR);\r\n                return;\r\n            }\r\n            var uploadRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = uploadRequest;\r\n            uploadRequest\r\n                .getPromise()\r\n                .then(function (newStatus) {\r\n                _this.increaseMultiplier_();\r\n                _this.request_ = null;\r\n                _this.updateProgress_(newStatus.current);\r\n                if (newStatus.finalized) {\r\n                    _this.metadata_ = newStatus.metadata;\r\n                    _this.transition_(InternalTaskState.SUCCESS);\r\n                }\r\n                else {\r\n                    _this.completeTransitions_();\r\n                }\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.increaseMultiplier_ = function () {\r\n        var currentSize = resumableUploadChunkSize * this.chunkMultiplier_;\r\n        // Max chunk size is 32M.\r\n        if (currentSize < 32 * 1024 * 1024) {\r\n            this.chunkMultiplier_ *= 2;\r\n        }\r\n    };\r\n    UploadTask.prototype.fetchMetadata_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = getMetadata(_this.authWrapper_, _this.location_, _this.mappings_);\r\n            var metadataRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = metadataRequest;\r\n            metadataRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.metadataErrorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.oneShotUpload_ = function () {\r\n        var _this = this;\r\n        this.resolveToken_(function (authToken) {\r\n            var requestInfo = multipartUpload(_this.authWrapper_, _this.location_, _this.mappings_, _this.blob_, _this.metadata_);\r\n            var multipartRequest = _this.authWrapper_.makeRequest(requestInfo, authToken);\r\n            _this.request_ = multipartRequest;\r\n            multipartRequest.getPromise().then(function (metadata) {\r\n                _this.request_ = null;\r\n                _this.metadata_ = metadata;\r\n                _this.updateProgress_(_this.blob_.size());\r\n                _this.transition_(InternalTaskState.SUCCESS);\r\n            }, _this.errorHandler_);\r\n        });\r\n    };\r\n    UploadTask.prototype.updateProgress_ = function (transferred) {\r\n        var old = this.transferred_;\r\n        this.transferred_ = transferred;\r\n        // A progress update can make the \"transferred\" value smaller (e.g. a\r\n        // partial upload not completed by server, after which the \"transferred\"\r\n        // value may reset to the value at the beginning of the request).\r\n        if (this.transferred_ !== old) {\r\n            this.notifyObservers_();\r\n        }\r\n    };\r\n    UploadTask.prototype.transition_ = function (state) {\r\n        if (this.state_ === state) {\r\n            return;\r\n        }\r\n        switch (state) {\r\n            case InternalTaskState.CANCELING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING);\r\n                this.state_ = state;\r\n                if (this.request_ !== null) {\r\n                    this.request_.cancel();\r\n                }\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.PAUSING);\r\n                var wasPaused = this.state_ === InternalTaskState.PAUSED;\r\n                this.state_ = state;\r\n                if (wasPaused) {\r\n                    this.notifyObservers_();\r\n                    this.start_();\r\n                }\r\n                break;\r\n            case InternalTaskState.PAUSED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.CANCELED:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.PAUSED ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.error_ = canceled();\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.ERROR:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n            case InternalTaskState.SUCCESS:\r\n                // TODO(andysoto):\r\n                // assert(this.state_ === InternalTaskState.RUNNING ||\r\n                //        this.state_ === InternalTaskState.PAUSING ||\r\n                //        this.state_ === InternalTaskState.CANCELING);\r\n                this.state_ = state;\r\n                this.notifyObservers_();\r\n                break;\r\n        }\r\n    };\r\n    UploadTask.prototype.completeTransitions_ = function () {\r\n        switch (this.state_) {\r\n            case InternalTaskState.PAUSING:\r\n                this.transition_(InternalTaskState.PAUSED);\r\n                break;\r\n            case InternalTaskState.CANCELING:\r\n                this.transition_(InternalTaskState.CANCELED);\r\n                break;\r\n            case InternalTaskState.RUNNING:\r\n                this.start_();\r\n                break;\r\n        }\r\n    };\r\n    Object.defineProperty(UploadTask.prototype, \"snapshot\", {\r\n        get: function () {\r\n            var externalState = taskStateFromInternalTaskState(this.state_);\r\n            return new UploadTaskSnapshot(this.transferred_, this.blob_.size(), externalState, this.metadata_, this, this.ref_);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Adds a callback for an event.\r\n     * @param type The type of event to listen for.\r\n     */\r\n    UploadTask.prototype.on = function (type, nextOrObserver, error, completed) {\r\n        function typeValidator() {\r\n            if (type !== TaskEvent.STATE_CHANGED) {\r\n                throw \"Expected one of the event types: [\" + TaskEvent.STATE_CHANGED + \"].\";\r\n            }\r\n        }\r\n        var nextOrObserverMessage = 'Expected a function or an Object with one of ' +\r\n            '`next`, `error`, `complete` properties.';\r\n        var nextValidator = nullFunctionSpec(true).validator;\r\n        var observerValidator = looseObjectSpec(null, true).validator;\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        function nextOrObserverValidator(p) {\r\n            try {\r\n                nextValidator(p);\r\n                return;\r\n            }\r\n            catch (e) { }\r\n            try {\r\n                observerValidator(p);\r\n                var anyDefined = isJustDef(p['next']) ||\r\n                    isJustDef(p['error']) ||\r\n                    isJustDef(p['complete']);\r\n                if (!anyDefined) {\r\n                    throw '';\r\n                }\r\n                return;\r\n            }\r\n            catch (e) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n        }\r\n        var specs = [\r\n            stringSpec(typeValidator),\r\n            looseObjectSpec(nextOrObserverValidator, true),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        validate('on', specs, arguments);\r\n        var self = this;\r\n        function makeBinder(specs) {\r\n            function binder(nextOrObserver, error, complete) {\r\n                if (specs !== null) {\r\n                    validate('on', specs, arguments);\r\n                }\r\n                var observer = new Observer(nextOrObserver, error, completed);\r\n                self.addObserver_(observer);\r\n                return function () {\r\n                    self.removeObserver_(observer);\r\n                };\r\n            }\r\n            return binder;\r\n        }\r\n        function binderNextOrObserverValidator(p) {\r\n            if (p === null) {\r\n                throw nextOrObserverMessage;\r\n            }\r\n            nextOrObserverValidator(p);\r\n        }\r\n        var binderSpecs = [\r\n            looseObjectSpec(binderNextOrObserverValidator),\r\n            nullFunctionSpec(true),\r\n            nullFunctionSpec(true)\r\n        ];\r\n        var typeOnly = !(isJustDef(nextOrObserver) ||\r\n            isJustDef(error) ||\r\n            isJustDef(completed));\r\n        if (typeOnly) {\r\n            return makeBinder(binderSpecs);\r\n        }\r\n        else {\r\n            return makeBinder(null)(nextOrObserver, error, completed);\r\n        }\r\n    };\r\n    /**\r\n     * This object behaves like a Promise, and resolves with its snapshot data\r\n     * when the upload completes.\r\n     * @param onFulfilled The fulfillment callback. Promise chaining works as normal.\r\n     * @param onRejected The rejection callback.\r\n     */\r\n    UploadTask.prototype.then = function (onFulfilled, onRejected) {\r\n        // These casts are needed so that TypeScript can infer the types of the\r\n        // resulting Promise.\r\n        return this.promise_.then(onFulfilled, onRejected);\r\n    };\r\n    /**\r\n     * Equivalent to calling `then(null, onRejected)`.\r\n     */\r\n    UploadTask.prototype.catch = function (onRejected) {\r\n        return this.then(null, onRejected);\r\n    };\r\n    /**\r\n     * Adds the given observer.\r\n     */\r\n    UploadTask.prototype.addObserver_ = function (observer) {\r\n        this.observers_.push(observer);\r\n        this.notifyObserver_(observer);\r\n    };\r\n    /**\r\n     * Removes the given observer.\r\n     */\r\n    UploadTask.prototype.removeObserver_ = function (observer) {\r\n        var i = this.observers_.indexOf(observer);\r\n        if (i !== -1) {\r\n            this.observers_.splice(i, 1);\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObservers_ = function () {\r\n        var _this = this;\r\n        this.finishPromise_();\r\n        var observers = this.observers_.slice();\r\n        observers.forEach(function (observer) {\r\n            _this.notifyObserver_(observer);\r\n        });\r\n    };\r\n    UploadTask.prototype.finishPromise_ = function () {\r\n        if (this.resolve_ !== null) {\r\n            var triggered = true;\r\n            switch (taskStateFromInternalTaskState(this.state_)) {\r\n                case TaskState.SUCCESS:\r\n                    async(this.resolve_.bind(null, this.snapshot))();\r\n                    break;\r\n                case TaskState.CANCELED:\r\n                case TaskState.ERROR:\r\n                    var toCall = this.reject_;\r\n                    async(toCall.bind(null, this.error_))();\r\n                    break;\r\n                default:\r\n                    triggered = false;\r\n                    break;\r\n            }\r\n            if (triggered) {\r\n                this.resolve_ = null;\r\n                this.reject_ = null;\r\n            }\r\n        }\r\n    };\r\n    UploadTask.prototype.notifyObserver_ = function (observer) {\r\n        var externalState = taskStateFromInternalTaskState(this.state_);\r\n        switch (externalState) {\r\n            case TaskState.RUNNING:\r\n            case TaskState.PAUSED:\r\n                if (observer.next) {\r\n                    async(observer.next.bind(observer, this.snapshot))();\r\n                }\r\n                break;\r\n            case TaskState.SUCCESS:\r\n                if (observer.complete) {\r\n                    async(observer.complete.bind(observer))();\r\n                }\r\n                break;\r\n            case TaskState.CANCELED:\r\n            case TaskState.ERROR:\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n                break;\r\n            default:\r\n                // TODO(andysoto): assert(false);\r\n                if (observer.error) {\r\n                    async(observer.error.bind(observer, this.error_))();\r\n                }\r\n        }\r\n    };\r\n    /**\r\n     * Resumes a paused task. Has no effect on a currently running or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.resume = function () {\r\n        validate('resume', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.PAUSED ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.RUNNING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Pauses a currently running task. Has no effect on a paused or failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.pause = function () {\r\n        validate('pause', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.PAUSING);\r\n        }\r\n        return valid;\r\n    };\r\n    /**\r\n     * Cancels a currently running or paused task. Has no effect on a complete or\r\n     * failed task.\r\n     * @return True if the operation took effect, false if ignored.\r\n     */\r\n    UploadTask.prototype.cancel = function () {\r\n        validate('cancel', [], arguments);\r\n        var valid = this.state_ === InternalTaskState.RUNNING ||\r\n            this.state_ === InternalTaskState.PAUSING;\r\n        if (valid) {\r\n            this.transition_(InternalTaskState.CANCELING);\r\n        }\r\n        return valid;\r\n    };\r\n    return UploadTask;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2019 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provides methods to interact with a bucket in the Firebase Storage service.\r\n * @param location An fbs.location, or the URL at\r\n *     which to base this object, in one of the following forms:\r\n *         gs://<bucket>/<object-path>\r\n *         http[s]://firebasestorage.googleapis.com/\r\n *                     <api-version>/b/<bucket>/o/<object-path>\r\n *     Any query or fragment strings will be ignored in the http[s]\r\n *     format. If no value is passed, the storage object will use a URL based on\r\n *     the project ID of the base firebase.App instance.\r\n */\r\nvar Reference = /** @class */ (function () {\r\n    function Reference(authWrapper, location) {\r\n        this.authWrapper = authWrapper;\r\n        if (location instanceof Location) {\r\n            this.location = location;\r\n        }\r\n        else {\r\n            this.location = Location.makeFromUrl(location);\r\n        }\r\n    }\r\n    /**\r\n     * @return The URL for the bucket and path this object references,\r\n     *     in the form gs://<bucket>/<object-path>\r\n     * @override\r\n     */\r\n    Reference.prototype.toString = function () {\r\n        validate('toString', [], arguments);\r\n        return 'gs://' + this.location.bucket + '/' + this.location.path;\r\n    };\r\n    Reference.prototype.newRef = function (authWrapper, location) {\r\n        return new Reference(authWrapper, location);\r\n    };\r\n    Reference.prototype.mappings = function () {\r\n        return getMappings();\r\n    };\r\n    /**\r\n     * @return A reference to the object obtained by\r\n     *     appending childPath, removing any duplicate, beginning, or trailing\r\n     *     slashes.\r\n     */\r\n    Reference.prototype.child = function (childPath) {\r\n        validate('child', [stringSpec()], arguments);\r\n        var newPath = child(this.location.path, childPath);\r\n        var location = new Location(this.location.bucket, newPath);\r\n        return this.newRef(this.authWrapper, location);\r\n    };\r\n    Object.defineProperty(Reference.prototype, \"parent\", {\r\n        /**\r\n         * @return A reference to the parent of the\r\n         *     current object, or null if the current object is the root.\r\n         */\r\n        get: function () {\r\n            var newPath = parent(this.location.path);\r\n            if (newPath === null) {\r\n                return null;\r\n            }\r\n            var location = new Location(this.location.bucket, newPath);\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"root\", {\r\n        /**\r\n         * @return An reference to the root of this\r\n         *     object's bucket.\r\n         */\r\n        get: function () {\r\n            var location = new Location(this.location.bucket, '');\r\n            return this.newRef(this.authWrapper, location);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"bucket\", {\r\n        get: function () {\r\n            return this.location.bucket;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"fullPath\", {\r\n        get: function () {\r\n            return this.location.path;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"name\", {\r\n        get: function () {\r\n            return lastComponent(this.location.path);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Reference.prototype, \"storage\", {\r\n        get: function () {\r\n            return this.authWrapper.service();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Uploads a blob to this object's location.\r\n     * @param data The blob to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.put = function (data, metadata) {\r\n        if (metadata === void 0) { metadata = null; }\r\n        validate('put', [uploadDataSpec(), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('put');\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data), metadata);\r\n    };\r\n    /**\r\n     * Uploads a string to this object's location.\r\n     * @param value The string to upload.\r\n     * @param format The format of the string to upload.\r\n     * @return An UploadTask that lets you control and\r\n     *     observe the upload.\r\n     */\r\n    Reference.prototype.putString = function (value, format, metadata) {\r\n        if (format === void 0) { format = StringFormat.RAW; }\r\n        validate('putString', [stringSpec(), stringSpec(formatValidator, true), metadataSpec(true)], arguments);\r\n        this.throwIfRoot_('putString');\r\n        var data = dataFromString(format, value);\r\n        var metadataClone = Object.assign({}, metadata);\r\n        if (!isDef(metadataClone['contentType']) &&\r\n            isDef(data.contentType)) {\r\n            metadataClone['contentType'] = data.contentType;\r\n        }\r\n        return new UploadTask(this, this.authWrapper, this.location, this.mappings(), new FbsBlob(data.data, true), metadataClone);\r\n    };\r\n    /**\r\n     * Deletes the object at this location.\r\n     * @return A promise that resolves if the deletion succeeds.\r\n     */\r\n    Reference.prototype.delete = function () {\r\n        var _this = this;\r\n        validate('delete', [], arguments);\r\n        this.throwIfRoot_('delete');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = deleteObject(_this.authWrapper, _this.location);\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * List all items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * This is a helper method for calling list() repeatedly until there are\r\n     * no more results. The default pagination size is 1000.\r\n     *\r\n     * Note: The results may not be consistent if objects are changed while this\r\n     * operation is running.\r\n     *\r\n     * Warning: listAll may potentially consume too many resources if there are\r\n     * too many results.\r\n     *\r\n     * @return A Promise that resolves with all the items and prefixes under\r\n     *      the current storage reference. `prefixes` contains references to\r\n     *      sub-directories and `items` contains references to objects in this\r\n     *      folder. `nextPageToken` is never returned.\r\n     */\r\n    Reference.prototype.listAll = function () {\r\n        validate('listAll', [], arguments);\r\n        var accumulator = {\r\n            prefixes: [],\r\n            items: []\r\n        };\r\n        return this.listAllHelper(accumulator).then(function () { return accumulator; });\r\n    };\r\n    Reference.prototype.listAllHelper = function (accumulator, pageToken) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var opt, nextPage;\r\n            var _a, _b;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        opt = {\r\n                            // maxResults is 1000 by default.\r\n                            pageToken: pageToken\r\n                        };\r\n                        return [4 /*yield*/, this.list(opt)];\r\n                    case 1:\r\n                        nextPage = _c.sent();\r\n                        (_a = accumulator.prefixes).push.apply(_a, nextPage.prefixes);\r\n                        (_b = accumulator.items).push.apply(_b, nextPage.items);\r\n                        if (!(nextPage.nextPageToken != null)) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.listAllHelper(accumulator, nextPage.nextPageToken)];\r\n                    case 2:\r\n                        _c.sent();\r\n                        _c.label = 3;\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * List items (files) and prefixes (folders) under this storage reference.\r\n     *\r\n     * List API is only available for Firebase Rules Version 2.\r\n     *\r\n     * GCS is a key-blob store. Firebase Storage imposes the semantic of '/'\r\n     * delimited folder structure.\r\n     * Refer to GCS's List API if you want to learn more.\r\n     *\r\n     * To adhere to Firebase Rules's Semantics, Firebase Storage does not\r\n     * support objects whose paths end with \"/\" or contain two consecutive\r\n     * \"/\"s. Firebase Storage List API will filter these unsupported objects.\r\n     * list() may fail if there are too many unsupported objects in the bucket.\r\n     *\r\n     * @param options See ListOptions for details.\r\n     * @return A Promise that resolves with the items and prefixes.\r\n     *      `prefixes` contains references to sub-folders and `items`\r\n     *      contains references to objects in this folder. `nextPageToken`\r\n     *      can be used to get the rest of the results.\r\n     */\r\n    Reference.prototype.list = function (options) {\r\n        validate('list', [listOptionSpec(true)], arguments);\r\n        var self = this;\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var op = options || {};\r\n            var requestInfo = list(self.authWrapper, self.location, \r\n            /*delimiter= */ '/', op.pageToken, op.maxResults);\r\n            return self.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     *     A promise that resolves with the metadata for this object. If this\r\n     *     object doesn't exist or metadata cannot be retreived, the promise is\r\n     *     rejected.\r\n     */\r\n    Reference.prototype.getMetadata = function () {\r\n        var _this = this;\r\n        validate('getMetadata', [], arguments);\r\n        this.throwIfRoot_('getMetadata');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getMetadata(_this.authWrapper, _this.location, _this.mappings());\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * Updates the metadata for this object.\r\n     * @param metadata The new metadata for the object.\r\n     *     Only values that have been explicitly set will be changed. Explicitly\r\n     *     setting a value to null will remove the metadata.\r\n     * @return A promise that resolves\r\n     *     with the new metadata for this object.\r\n     *     @see firebaseStorage.Reference.prototype.getMetadata\r\n     */\r\n    Reference.prototype.updateMetadata = function (metadata) {\r\n        var _this = this;\r\n        validate('updateMetadata', [metadataSpec()], arguments);\r\n        this.throwIfRoot_('updateMetadata');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = updateMetadata(_this.authWrapper, _this.location, metadata, _this.mappings());\r\n            return _this.authWrapper.makeRequest(requestInfo, authToken).getPromise();\r\n        });\r\n    };\r\n    /**\r\n     * @return A promise that resolves with the download\r\n     *     URL for this object.\r\n     */\r\n    Reference.prototype.getDownloadURL = function () {\r\n        var _this = this;\r\n        validate('getDownloadURL', [], arguments);\r\n        this.throwIfRoot_('getDownloadURL');\r\n        return this.authWrapper.getAuthToken().then(function (authToken) {\r\n            var requestInfo = getDownloadUrl(_this.authWrapper, _this.location, _this.mappings());\r\n            return _this.authWrapper\r\n                .makeRequest(requestInfo, authToken)\r\n                .getPromise()\r\n                .then(function (url) {\r\n                if (url === null) {\r\n                    throw noDownloadURL();\r\n                }\r\n                return url;\r\n            });\r\n        });\r\n    };\r\n    Reference.prototype.throwIfRoot_ = function (name) {\r\n        if (this.location.path === '') {\r\n            throw invalidRootOperation(name);\r\n        }\r\n    };\r\n    return Reference;\r\n}());\n\n/**\r\n * A request whose promise always fails.\r\n * @struct\r\n * @template T\r\n */\r\nvar FailRequest = /** @class */ (function () {\r\n    function FailRequest(error) {\r\n        this.promise_ = Promise.reject(error);\r\n    }\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    FailRequest.prototype.cancel = function (_appDelete) {\r\n    };\r\n    return FailRequest;\r\n}());\n\nvar RequestMap = /** @class */ (function () {\r\n    function RequestMap() {\r\n        this.map = new Map();\r\n        this.id = MIN_SAFE_INTEGER;\r\n    }\r\n    /**\r\n     * Registers the given request with this map.\r\n     * The request is unregistered when it completes.\r\n     *\r\n     * @param request The request to register.\r\n     */\r\n    RequestMap.prototype.addRequest = function (request) {\r\n        var _this = this;\r\n        var id = this.id;\r\n        this.id++;\r\n        this.map.set(id, request);\r\n        request.getPromise().then(function () { return _this.map.delete(id); }, function () { return _this.map.delete(id); });\r\n    };\r\n    /**\r\n     * Cancels all registered requests.\r\n     */\r\n    RequestMap.prototype.clear = function () {\r\n        this.map.forEach(function (v) {\r\n            v && v.cancel(true);\r\n        });\r\n        this.map.clear();\r\n    };\r\n    return RequestMap;\r\n}());\n\n/**\r\n * @param app If null, getAuthToken always resolves with null.\r\n * @param service The storage service associated with this auth wrapper.\r\n *     Untyped to avoid circular type dependencies.\r\n * @struct\r\n */\r\nvar AuthWrapper = /** @class */ (function () {\r\n    function AuthWrapper(app, maker, requestMaker, service, pool) {\r\n        this.bucket_ = null;\r\n        this.deleted_ = false;\r\n        this.app_ = app;\r\n        if (this.app_ !== null) {\r\n            var options = this.app_.options;\r\n            if (isDef(options)) {\r\n                this.bucket_ = AuthWrapper.extractBucket_(options);\r\n            }\r\n        }\r\n        this.storageRefMaker_ = maker;\r\n        this.requestMaker_ = requestMaker;\r\n        this.pool_ = pool;\r\n        this.service_ = service;\r\n        this.maxOperationRetryTime_ = DEFAULT_MAX_OPERATION_RETRY_TIME;\r\n        this.maxUploadRetryTime_ = DEFAULT_MAX_UPLOAD_RETRY_TIME;\r\n        this.requestMap_ = new RequestMap();\r\n    }\r\n    AuthWrapper.extractBucket_ = function (config) {\r\n        var bucketString = config[CONFIG_STORAGE_BUCKET_KEY] || null;\r\n        if (bucketString == null) {\r\n            return null;\r\n        }\r\n        var loc = Location.makeFromBucketSpec(bucketString);\r\n        return loc.bucket;\r\n    };\r\n    AuthWrapper.prototype.getAuthToken = function () {\r\n        // TODO(andysoto): remove ifDef checks after firebase-app implements stubs\r\n        // (b/28673818).\r\n        if (this.app_ !== null &&\r\n            isDef(this.app_.INTERNAL) &&\r\n            isDef(this.app_.INTERNAL.getToken)) {\r\n            return this.app_.INTERNAL.getToken().then(function (response) {\r\n                if (response !== null) {\r\n                    return response.accessToken;\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }, function () { return null; });\r\n        }\r\n        else {\r\n            return Promise.resolve(null);\r\n        }\r\n    };\r\n    AuthWrapper.prototype.bucket = function () {\r\n        if (this.deleted_) {\r\n            throw appDeleted();\r\n        }\r\n        else {\r\n            return this.bucket_;\r\n        }\r\n    };\r\n    /**\r\n     * The service associated with this auth wrapper. Untyped to avoid circular\r\n     * type dependencies.\r\n     */\r\n    AuthWrapper.prototype.service = function () {\r\n        return this.service_;\r\n    };\r\n    /**\r\n     * Returns a new firebaseStorage.Reference object referencing this AuthWrapper\r\n     * at the given Location.\r\n     * @param loc The Location.\r\n     * @return Actually a firebaseStorage.Reference, typing not allowed\r\n     *     because of circular dependency problems.\r\n     */\r\n    AuthWrapper.prototype.makeStorageReference = function (loc) {\r\n        return this.storageRefMaker_(this, loc);\r\n    };\r\n    AuthWrapper.prototype.makeRequest = function (requestInfo, authToken) {\r\n        if (!this.deleted_) {\r\n            var request = this.requestMaker_(requestInfo, authToken, this.pool_);\r\n            this.requestMap_.addRequest(request);\r\n            return request;\r\n        }\r\n        else {\r\n            return new FailRequest(appDeleted());\r\n        }\r\n    };\r\n    /**\r\n     * Stop running requests and prevent more from being created.\r\n     */\r\n    AuthWrapper.prototype.deleteApp = function () {\r\n        this.deleted_ = true;\r\n        this.app_ = null;\r\n        this.requestMap_.clear();\r\n    };\r\n    AuthWrapper.prototype.maxUploadRetryTime = function () {\r\n        return this.maxUploadRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxUploadRetryTime = function (time) {\r\n        this.maxUploadRetryTime_ = time;\r\n    };\r\n    AuthWrapper.prototype.maxOperationRetryTime = function () {\r\n        return this.maxOperationRetryTime_;\r\n    };\r\n    AuthWrapper.prototype.setMaxOperationRetryTime = function (time) {\r\n        this.maxOperationRetryTime_ = time;\r\n    };\r\n    return AuthWrapper;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @param f May be invoked\r\n *     before the function returns.\r\n * @param callback Get all the arguments passed to the function\r\n *     passed to f, including the initial boolean.\r\n */\r\nfunction start(f, callback, timeout) {\r\n    // TODO(andysoto): make this code cleaner (probably refactor into an actual\r\n    // type instead of a bunch of functions with state shared in the closure)\r\n    var waitSeconds = 1;\r\n    // Would type this as \"number\" but that doesn't work for Node so ¯\\_(ツ)_/¯\r\n    // TODO: find a way to exclude Node type definition for storage because storage only works in browser\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    var timeoutId = null;\r\n    var hitTimeout = false;\r\n    var cancelState = 0;\r\n    function canceled() {\r\n        return cancelState === 2;\r\n    }\r\n    var triggeredCallback = false;\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function triggerCallback() {\r\n        var args = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            args[_i] = arguments[_i];\r\n        }\r\n        if (!triggeredCallback) {\r\n            triggeredCallback = true;\r\n            callback.apply(null, args);\r\n        }\r\n    }\r\n    function callWithDelay(millis) {\r\n        timeoutId = setTimeout(function () {\r\n            timeoutId = null;\r\n            f(handler, canceled());\r\n        }, millis);\r\n    }\r\n    // TODO: This disable can be removed and the 'ignoreRestArgs' option added to\r\n    // the no-explicit-any rule when ESlint releases it.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    function handler(success) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (success) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        var mustStop = canceled() || hitTimeout;\r\n        if (mustStop) {\r\n            triggerCallback.call.apply(triggerCallback, __spreadArrays([null, success], args));\r\n            return;\r\n        }\r\n        if (waitSeconds < 64) {\r\n            /* TODO(andysoto): don't back off so quickly if we know we're offline. */\r\n            waitSeconds *= 2;\r\n        }\r\n        var waitMillis;\r\n        if (cancelState === 1) {\r\n            cancelState = 2;\r\n            waitMillis = 0;\r\n        }\r\n        else {\r\n            waitMillis = (waitSeconds + Math.random()) * 1000;\r\n        }\r\n        callWithDelay(waitMillis);\r\n    }\r\n    var stopped = false;\r\n    function stop(wasTimeout) {\r\n        if (stopped) {\r\n            return;\r\n        }\r\n        stopped = true;\r\n        if (triggeredCallback) {\r\n            return;\r\n        }\r\n        if (timeoutId !== null) {\r\n            if (!wasTimeout) {\r\n                cancelState = 2;\r\n            }\r\n            clearTimeout(timeoutId);\r\n            callWithDelay(0);\r\n        }\r\n        else {\r\n            if (!wasTimeout) {\r\n                cancelState = 1;\r\n            }\r\n        }\r\n    }\r\n    callWithDelay(0);\r\n    setTimeout(function () {\r\n        hitTimeout = true;\r\n        stop(true);\r\n    }, timeout);\r\n    return stop;\r\n}\r\n/**\r\n * Stops the retry loop from repeating.\r\n * If the function is currently \"in between\" retries, it is invoked immediately\r\n * with the second parameter as \"true\". Otherwise, it will be invoked once more\r\n * after the current invocation finishes iff the current invocation would have\r\n * triggered another retry.\r\n */\r\nfunction stop(id) {\r\n    id(false);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @struct\r\n * @template T\r\n */\r\nvar NetworkRequest = /** @class */ (function () {\r\n    function NetworkRequest(url, method, headers, body, successCodes, additionalRetryCodes, callback, errorCallback, timeout, progressCallback, pool) {\r\n        var _this = this;\r\n        this.pendingXhr_ = null;\r\n        this.backoffId_ = null;\r\n        this.resolve_ = null;\r\n        this.reject_ = null;\r\n        this.canceled_ = false;\r\n        this.appDelete_ = false;\r\n        this.url_ = url;\r\n        this.method_ = method;\r\n        this.headers_ = headers;\r\n        this.body_ = body;\r\n        this.successCodes_ = successCodes.slice();\r\n        this.additionalRetryCodes_ = additionalRetryCodes.slice();\r\n        this.callback_ = callback;\r\n        this.errorCallback_ = errorCallback;\r\n        this.progressCallback_ = progressCallback;\r\n        this.timeout_ = timeout;\r\n        this.pool_ = pool;\r\n        this.promise_ = new Promise(function (resolve, reject) {\r\n            _this.resolve_ = resolve;\r\n            _this.reject_ = reject;\r\n            _this.start_();\r\n        });\r\n    }\r\n    /**\r\n     * Actually starts the retry loop.\r\n     */\r\n    NetworkRequest.prototype.start_ = function () {\r\n        var self = this;\r\n        function doTheRequest(backoffCallback, canceled) {\r\n            if (canceled) {\r\n                backoffCallback(false, new RequestEndStatus(false, null, true));\r\n                return;\r\n            }\r\n            var xhr = self.pool_.createXhrIo();\r\n            self.pendingXhr_ = xhr;\r\n            function progressListener(progressEvent) {\r\n                var loaded = progressEvent.loaded;\r\n                var total = progressEvent.lengthComputable ? progressEvent.total : -1;\r\n                if (self.progressCallback_ !== null) {\r\n                    self.progressCallback_(loaded, total);\r\n                }\r\n            }\r\n            if (self.progressCallback_ !== null) {\r\n                xhr.addUploadProgressListener(progressListener);\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            xhr\r\n                .send(self.url_, self.method_, self.body_, self.headers_)\r\n                .then(function (xhr) {\r\n                if (self.progressCallback_ !== null) {\r\n                    xhr.removeUploadProgressListener(progressListener);\r\n                }\r\n                self.pendingXhr_ = null;\r\n                xhr = xhr;\r\n                var hitServer = xhr.getErrorCode() === ErrorCode.NO_ERROR;\r\n                var status = xhr.getStatus();\r\n                if (!hitServer || self.isRetryStatusCode_(status)) {\r\n                    var wasCanceled = xhr.getErrorCode() === ErrorCode.ABORT;\r\n                    backoffCallback(false, new RequestEndStatus(false, null, wasCanceled));\r\n                    return;\r\n                }\r\n                var successCode = self.successCodes_.indexOf(status) !== -1;\r\n                backoffCallback(true, new RequestEndStatus(successCode, xhr));\r\n            });\r\n        }\r\n        /**\r\n         * @param requestWentThrough True if the request eventually went\r\n         *     through, false if it hit the retry limit or was canceled.\r\n         */\r\n        function backoffDone(requestWentThrough, status) {\r\n            var resolve = self.resolve_;\r\n            var reject = self.reject_;\r\n            var xhr = status.xhr;\r\n            if (status.wasSuccessCode) {\r\n                try {\r\n                    var result = self.callback_(xhr, xhr.getResponseText());\r\n                    if (isJustDef(result)) {\r\n                        resolve(result);\r\n                    }\r\n                    else {\r\n                        resolve();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }\r\n            else {\r\n                if (xhr !== null) {\r\n                    var err = unknown();\r\n                    err.setServerResponseProp(xhr.getResponseText());\r\n                    if (self.errorCallback_) {\r\n                        reject(self.errorCallback_(xhr, err));\r\n                    }\r\n                    else {\r\n                        reject(err);\r\n                    }\r\n                }\r\n                else {\r\n                    if (status.canceled) {\r\n                        var err = self.appDelete_ ? appDeleted() : canceled();\r\n                        reject(err);\r\n                    }\r\n                    else {\r\n                        var err = retryLimitExceeded();\r\n                        reject(err);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.canceled_) {\r\n            backoffDone(false, new RequestEndStatus(false, null, true));\r\n        }\r\n        else {\r\n            this.backoffId_ = start(doTheRequest, backoffDone, this.timeout_);\r\n        }\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.getPromise = function () {\r\n        return this.promise_;\r\n    };\r\n    /** @inheritDoc */\r\n    NetworkRequest.prototype.cancel = function (appDelete) {\r\n        this.canceled_ = true;\r\n        this.appDelete_ = appDelete || false;\r\n        if (this.backoffId_ !== null) {\r\n            stop(this.backoffId_);\r\n        }\r\n        if (this.pendingXhr_ !== null) {\r\n            this.pendingXhr_.abort();\r\n        }\r\n    };\r\n    NetworkRequest.prototype.isRetryStatusCode_ = function (status) {\r\n        // The codes for which to retry came from this page:\r\n        // https://cloud.google.com/storage/docs/exponential-backoff\r\n        var isFiveHundredCode = status >= 500 && status < 600;\r\n        var extraRetryCodes = [\r\n            // Request Timeout: web server didn't receive full request in time.\r\n            408,\r\n            // Too Many Requests: you're getting rate-limited, basically.\r\n            429\r\n        ];\r\n        var isExtraRetryCode = extraRetryCodes.indexOf(status) !== -1;\r\n        var isRequestSpecificRetryCode = this.additionalRetryCodes_.indexOf(status) !== -1;\r\n        return isFiveHundredCode || isExtraRetryCode || isRequestSpecificRetryCode;\r\n    };\r\n    return NetworkRequest;\r\n}());\r\n/**\r\n * A collection of information about the result of a network request.\r\n * @param opt_canceled Defaults to false.\r\n * @struct\r\n */\r\nvar RequestEndStatus = /** @class */ (function () {\r\n    function RequestEndStatus(wasSuccessCode, xhr, canceled) {\r\n        this.wasSuccessCode = wasSuccessCode;\r\n        this.xhr = xhr;\r\n        this.canceled = !!canceled;\r\n    }\r\n    return RequestEndStatus;\r\n}());\r\nfunction addAuthHeader_(headers, authToken) {\r\n    if (authToken !== null && authToken.length > 0) {\r\n        headers['Authorization'] = 'Firebase ' + authToken;\r\n    }\r\n}\r\nfunction addVersionHeader_(headers) {\r\n    var version = typeof firebase !== 'undefined' ? firebase.SDK_VERSION : 'AppManager';\r\n    headers['X-Firebase-Storage-Version'] = 'webjs/' + version;\r\n}\r\n/**\r\n * @template T\r\n */\r\nfunction makeRequest(requestInfo, authToken, pool) {\r\n    var queryPart = makeQueryString(requestInfo.urlParams);\r\n    var url = requestInfo.url + queryPart;\r\n    var headers = Object.assign({}, requestInfo.headers);\r\n    addAuthHeader_(headers, authToken);\r\n    addVersionHeader_(headers);\r\n    return new NetworkRequest(url, requestInfo.method, headers, requestInfo.body, requestInfo.successCodes, requestInfo.additionalRetryCodes, requestInfo.handler, requestInfo.errorHandler, requestInfo.timeout, requestInfo.progressCallback, pool);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A service that provides firebaseStorage.Reference instances.\r\n * @param opt_url gs:// url to a custom Storage Bucket\r\n *\r\n * @struct\r\n */\r\nvar Service = /** @class */ (function () {\r\n    function Service(app, pool, url) {\r\n        this.bucket_ = null;\r\n        function maker(authWrapper, loc) {\r\n            return new Reference(authWrapper, loc);\r\n        }\r\n        this.authWrapper_ = new AuthWrapper(app, maker, makeRequest, this, pool);\r\n        this.app_ = app;\r\n        if (url != null) {\r\n            this.bucket_ = Location.makeFromBucketSpec(url);\r\n        }\r\n        else {\r\n            var authWrapperBucket = this.authWrapper_.bucket();\r\n            if (authWrapperBucket != null) {\r\n                this.bucket_ = new Location(authWrapperBucket, '');\r\n            }\r\n        }\r\n        this.internals_ = new ServiceInternals(this);\r\n    }\r\n    /**\r\n     * Returns a firebaseStorage.Reference for the given path in the default\r\n     * bucket.\r\n     */\r\n    Service.prototype.ref = function (path) {\r\n        function validator(path) {\r\n            if (typeof path !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (/^[A-Za-z]+:\\/\\//.test(path)) {\r\n                throw 'Expected child path but got a URL, use refFromURL instead.';\r\n            }\r\n        }\r\n        validate('ref', [stringSpec(validator, true)], arguments);\r\n        if (this.bucket_ == null) {\r\n            throw new Error('No Storage Bucket defined in Firebase Options.');\r\n        }\r\n        var ref = new Reference(this.authWrapper_, this.bucket_);\r\n        if (path != null) {\r\n            return ref.child(path);\r\n        }\r\n        else {\r\n            return ref;\r\n        }\r\n    };\r\n    /**\r\n     * Returns a firebaseStorage.Reference object for the given absolute URL,\r\n     * which must be a gs:// or http[s]:// URL.\r\n     */\r\n    Service.prototype.refFromURL = function (url) {\r\n        function validator(p) {\r\n            if (typeof p !== 'string') {\r\n                throw 'Path is not a string.';\r\n            }\r\n            if (!/^[A-Za-z]+:\\/\\//.test(p)) {\r\n                throw 'Expected full URL but got a child path, use ref instead.';\r\n            }\r\n            try {\r\n                Location.makeFromUrl(p);\r\n            }\r\n            catch (e) {\r\n                throw 'Expected valid full URL but got an invalid one.';\r\n            }\r\n        }\r\n        validate('refFromURL', [stringSpec(validator, false)], arguments);\r\n        return new Reference(this.authWrapper_, url);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"maxUploadRetryTime\", {\r\n        get: function () {\r\n            return this.authWrapper_.maxUploadRetryTime();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Service.prototype.setMaxUploadRetryTime = function (time) {\r\n        validate('setMaxUploadRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxUploadRetryTime(time);\r\n    };\r\n    Service.prototype.setMaxOperationRetryTime = function (time) {\r\n        validate('setMaxOperationRetryTime', [nonNegativeNumberSpec()], arguments);\r\n        this.authWrapper_.setMaxOperationRetryTime(time);\r\n    };\r\n    Object.defineProperty(Service.prototype, \"app\", {\r\n        get: function () {\r\n            return this.app_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Service.prototype, \"INTERNAL\", {\r\n        get: function () {\r\n            return this.internals_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Service;\r\n}());\r\n/**\r\n * @struct\r\n */\r\nvar ServiceInternals = /** @class */ (function () {\r\n    function ServiceInternals(service) {\r\n        this.service_ = service;\r\n    }\r\n    /**\r\n     * Called when the associated app is deleted.\r\n     * @see {!fbs.AuthWrapper.prototype.deleteApp}\r\n     */\r\n    ServiceInternals.prototype.delete = function () {\r\n        this.service_.authWrapper_.deleteApp();\r\n        return Promise.resolve();\r\n    };\r\n    return ServiceInternals;\r\n}());\n\n/**\r\n * @license\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Type constant for Firebase Storage.\r\n */\r\nvar STORAGE_TYPE = 'storage';\r\nfunction factory(app, unused, url) {\r\n    return new Service(app, new XhrIoPool(), url);\r\n}\r\nfunction registerStorage(instance) {\r\n    var namespaceExports = {\r\n        // no-inline\r\n        TaskState: TaskState,\r\n        TaskEvent: TaskEvent,\r\n        StringFormat: StringFormat,\r\n        Storage: Service,\r\n        Reference: Reference\r\n    };\r\n    instance.INTERNAL.registerService(STORAGE_TYPE, factory, namespaceExports, undefined, \r\n    // Allow multiple storage instances per app.\r\n    true);\r\n}\r\nregisterStorage(firebase);\n\nexport { registerStorage };\n//# sourceMappingURL=index.esm.js.map\n","// Components\nimport VInput from '../VInput/VInput'\n\n// Mixins\nimport mixins from '../../util/mixins'\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport { provide as RegistrableProvide } from '../../mixins/registrable'\n\n// Helpers\nimport { VNode } from 'vue'\n\ntype ErrorBag = Record<number, boolean>\ntype VInputInstance = InstanceType<typeof VInput>\ntype Watchers = {\n  _uid: number\n  valid: () => void\n  shouldValidate: () => void\n}\n\n/* @vue/component */\nexport default mixins(\n  BindsAttrs,\n  RegistrableProvide('form')\n  /* @vue/component */\n).extend({\n  name: 'v-form',\n\n  inheritAttrs: false,\n\n  props: {\n    lazyValidation: Boolean,\n    value: Boolean,\n  },\n\n  data: () => ({\n    inputs: [] as VInputInstance[],\n    watchers: [] as Watchers[],\n    errorBag: {} as ErrorBag,\n  }),\n\n  watch: {\n    errorBag: {\n      handler (val) {\n        const errors = Object.values(val).includes(true)\n\n        this.$emit('input', !errors)\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n\n  methods: {\n    watchInput (input: any): Watchers {\n      const watcher = (input: any): (() => void) => {\n        return input.$watch('hasError', (val: boolean) => {\n          this.$set(this.errorBag, input._uid, val)\n        }, { immediate: true })\n      }\n\n      const watchers: Watchers = {\n        _uid: input._uid,\n        valid: () => {},\n        shouldValidate: () => {},\n      }\n\n      if (this.lazyValidation) {\n        // Only start watching inputs if we need to\n        watchers.shouldValidate = input.$watch('shouldValidate', (val: boolean) => {\n          if (!val) return\n\n          // Only watch if we're not already doing it\n          if (this.errorBag.hasOwnProperty(input._uid)) return\n\n          watchers.valid = watcher(input)\n        })\n      } else {\n        watchers.valid = watcher(input)\n      }\n\n      return watchers\n    },\n    /** @public */\n    validate (): boolean {\n      return this.inputs.filter(input => !input.validate(true)).length === 0\n    },\n    /** @public */\n    reset (): void {\n      this.inputs.forEach(input => input.reset())\n      this.resetErrorBag()\n    },\n    resetErrorBag () {\n      if (this.lazyValidation) {\n        // Account for timeout in validatable\n        setTimeout(() => {\n          this.errorBag = {}\n        }, 0)\n      }\n    },\n    /** @public */\n    resetValidation () {\n      this.inputs.forEach(input => input.resetValidation())\n      this.resetErrorBag()\n    },\n    register (input: VInputInstance) {\n      this.inputs.push(input)\n      this.watchers.push(this.watchInput(input))\n    },\n    unregister (input: VInputInstance) {\n      const found = this.inputs.find(i => i._uid === input._uid)\n\n      if (!found) return\n\n      const unwatch = this.watchers.find(i => i._uid === found._uid)\n      if (unwatch) {\n        unwatch.valid()\n        unwatch.shouldValidate()\n      }\n\n      this.watchers = this.watchers.filter(i => i._uid !== found._uid)\n      this.inputs = this.inputs.filter(i => i._uid !== found._uid)\n      this.$delete(this.errorBag, found._uid)\n    },\n  },\n\n  render (h): VNode {\n    return h('form', {\n      staticClass: 'v-form',\n      attrs: {\n        novalidate: true,\n        ...this.attrs$,\n      },\n      on: {\n        submit: (e: Event) => this.$emit('submit', e),\n      },\n    }, this.$slots.default)\n  },\n})\n","// Styles\nimport './VLabel.sass'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Themeable, { functionalThemeClasses } from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\n// Helpers\nimport { convertToUnit } from '../../util/helpers'\n\n/* @vue/component */\nexport default mixins(Themeable).extend({\n  name: 'v-label',\n\n  functional: true,\n\n  props: {\n    absolute: Boolean,\n    color: {\n      type: String,\n      default: 'primary',\n    },\n    disabled: Boolean,\n    focused: Boolean,\n    for: String,\n    left: {\n      type: [Number, String],\n      default: 0,\n    },\n    right: {\n      type: [Number, String],\n      default: 'auto',\n    },\n    value: Boolean,\n  },\n\n  render (h, ctx): VNode {\n    const { children, listeners, props } = ctx\n    const data = {\n      staticClass: 'v-label',\n      class: {\n        'v-label--active': props.value,\n        'v-label--is-disabled': props.disabled,\n        ...functionalThemeClasses(ctx),\n      },\n      attrs: {\n        for: props.for,\n        'aria-hidden': !props.for,\n      },\n      on: listeners,\n      style: {\n        left: convertToUnit(props.left),\n        right: convertToUnit(props.right),\n        position: props.absolute ? 'absolute' : 'relative',\n      },\n      ref: 'label',\n    }\n\n    return h('label', Colorable.options.methods.setTextColor(props.focused && props.color, data), children)\n  },\n})\n","import VLabel from './VLabel'\n\nexport { VLabel }\nexport default VLabel\n","// Styles\nimport './VMessages.sass'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Themeable from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\nimport { PropValidator } from 'vue/types/options'\nimport mixins from '../../util/mixins'\n\n// Utilities\nimport {\n  escapeHTML,\n  getSlot,\n} from '../../util/helpers'\n\n/* @vue/component */\nexport default mixins(Colorable, Themeable).extend({\n  name: 'v-messages',\n\n  props: {\n    value: {\n      type: Array,\n      default: () => ([]),\n    } as PropValidator<string[]>,\n  },\n\n  methods: {\n    genChildren () {\n      return this.$createElement('transition-group', {\n        staticClass: 'v-messages__wrapper',\n        attrs: {\n          name: 'message-transition',\n          tag: 'div',\n        },\n      }, this.value.map(this.genMessage))\n    },\n    genMessage (message: string, key: number) {\n      const slot = getSlot(this, 'default', { message, key })\n      const escapedHTML = escapeHTML(message)\n      const innerHTML = !slot ? escapedHTML : undefined\n\n      return this.$createElement('div', {\n        staticClass: 'v-messages__message',\n        key,\n        domProps: { innerHTML },\n      }, slot)\n    },\n  },\n\n  render (h): VNode {\n    return h('div', this.setTextColor(this.color, {\n      staticClass: 'v-messages',\n      class: this.themeClasses,\n    }), [this.genChildren()])\n  },\n})\n","import VMessages from './VMessages'\n\nexport { VMessages }\nexport default VMessages\n","// Mixins\nimport Colorable from '../colorable'\nimport Themeable from '../themeable'\nimport { inject as RegistrableInject } from '../registrable'\n\n// Utilities\nimport { deepEqual } from '../../util/helpers'\nimport { consoleError } from '../../util/console'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { PropValidator } from 'vue/types/options'\nexport type VuetifyRuleValidator = (value: any) => string | boolean\nexport type VuetifyMessage = string | string[]\nexport type VuetifyRuleValidations = (VuetifyRuleValidator | string)[]\n\n/* @vue/component */\nexport default mixins(\n  Colorable,\n  RegistrableInject('form'),\n  Themeable\n).extend({\n  name: 'validatable',\n\n  props: {\n    disabled: Boolean,\n    error: Boolean,\n    errorCount: {\n      type: [Number, String],\n      default: 1,\n    },\n    errorMessages: {\n      type: [String, Array],\n      default: () => [],\n    } as PropValidator<VuetifyMessage>,\n    messages: {\n      type: [String, Array],\n      default: () => [],\n    } as PropValidator<VuetifyMessage>,\n    readonly: Boolean,\n    rules: {\n      type: Array,\n      default: () => [],\n    } as PropValidator<VuetifyRuleValidations>,\n    success: Boolean,\n    successMessages: {\n      type: [String, Array],\n      default: () => [],\n    } as PropValidator<VuetifyMessage>,\n    validateOnBlur: Boolean,\n    value: { required: false },\n  },\n\n  data () {\n    return {\n      errorBucket: [] as string[],\n      hasColor: false,\n      hasFocused: false,\n      hasInput: false,\n      isFocused: false,\n      isResetting: false,\n      lazyValue: this.value,\n      valid: false,\n    }\n  },\n\n  computed: {\n    computedColor (): string | undefined {\n      if (this.disabled) return undefined\n      if (this.color) return this.color\n      // It's assumed that if the input is on a\n      // dark background, the user will want to\n      // have a white color. If the entire app\n      // is setup to be dark, then they will\n      // like want to use their primary color\n      if (this.isDark && !this.appIsDark) return 'white'\n      else return 'primary'\n    },\n    hasError (): boolean {\n      return (\n        this.internalErrorMessages.length > 0 ||\n        this.errorBucket.length > 0 ||\n        this.error\n      )\n    },\n    // TODO: Add logic that allows the user to enable based\n    // upon a good validation\n    hasSuccess (): boolean {\n      return (\n        this.internalSuccessMessages.length > 0 ||\n        this.success\n      )\n    },\n    externalError (): boolean {\n      return this.internalErrorMessages.length > 0 || this.error\n    },\n    hasMessages (): boolean {\n      return this.validationTarget.length > 0\n    },\n    hasState (): boolean {\n      if (this.disabled) return false\n\n      return (\n        this.hasSuccess ||\n        (this.shouldValidate && this.hasError)\n      )\n    },\n    internalErrorMessages (): VuetifyRuleValidations {\n      return this.genInternalMessages(this.errorMessages)\n    },\n    internalMessages (): VuetifyRuleValidations {\n      return this.genInternalMessages(this.messages)\n    },\n    internalSuccessMessages (): VuetifyRuleValidations {\n      return this.genInternalMessages(this.successMessages)\n    },\n    internalValue: {\n      get (): unknown {\n        return this.lazyValue\n      },\n      set (val: any) {\n        this.lazyValue = val\n\n        this.$emit('input', val)\n      },\n    },\n    shouldValidate (): boolean {\n      if (this.externalError) return true\n      if (this.isResetting) return false\n\n      return this.validateOnBlur\n        ? this.hasFocused && !this.isFocused\n        : (this.hasInput || this.hasFocused)\n    },\n    validations (): VuetifyRuleValidations {\n      return this.validationTarget.slice(0, Number(this.errorCount))\n    },\n    validationState (): string | undefined {\n      if (this.disabled) return undefined\n      if (this.hasError && this.shouldValidate) return 'error'\n      if (this.hasSuccess) return 'success'\n      if (this.hasColor) return this.computedColor\n      return undefined\n    },\n    validationTarget (): VuetifyRuleValidations {\n      if (this.internalErrorMessages.length > 0) {\n        return this.internalErrorMessages\n      } else if (this.successMessages.length > 0) {\n        return this.internalSuccessMessages\n      } else if (this.messages.length > 0) {\n        return this.internalMessages\n      } else if (this.shouldValidate) {\n        return this.errorBucket\n      } else return []\n    },\n  },\n\n  watch: {\n    rules: {\n      handler (newVal, oldVal) {\n        if (deepEqual(newVal, oldVal)) return\n        this.validate()\n      },\n      deep: true,\n    },\n    internalValue () {\n      // If it's the first time we're setting input,\n      // mark it with hasInput\n      this.hasInput = true\n      this.validateOnBlur || this.$nextTick(this.validate)\n    },\n    isFocused (val) {\n      // Should not check validation\n      // if disabled\n      if (\n        !val &&\n        !this.disabled\n      ) {\n        this.hasFocused = true\n        this.validateOnBlur && this.validate()\n      }\n    },\n    isResetting () {\n      setTimeout(() => {\n        this.hasInput = false\n        this.hasFocused = false\n        this.isResetting = false\n        this.validate()\n      }, 0)\n    },\n    hasError (val) {\n      if (this.shouldValidate) {\n        this.$emit('update:error', val)\n      }\n    },\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  beforeMount () {\n    this.validate()\n  },\n\n  created () {\n    this.form && this.form.register(this)\n  },\n\n  beforeDestroy () {\n    this.form && this.form.unregister(this)\n  },\n\n  methods: {\n    genInternalMessages (messages: VuetifyMessage): VuetifyRuleValidations {\n      if (!messages) return []\n      else if (Array.isArray(messages)) return messages\n      else return [messages]\n    },\n    /** @public */\n    reset () {\n      this.isResetting = true\n      this.internalValue = Array.isArray(this.internalValue)\n        ? []\n        : undefined\n    },\n    /** @public */\n    resetValidation () {\n      this.isResetting = true\n    },\n    /** @public */\n    validate (force = false, value?: any): boolean {\n      const errorBucket = []\n      value = value || this.internalValue\n\n      if (force) this.hasInput = this.hasFocused = true\n\n      for (let index = 0; index < this.rules.length; index++) {\n        const rule = this.rules[index]\n        const valid = typeof rule === 'function' ? rule(value) : rule\n\n        if (typeof valid === 'string') {\n          errorBucket.push(valid)\n        } else if (typeof valid !== 'boolean') {\n          consoleError(`Rules should return a string or boolean, received '${typeof valid}' instead`, this)\n        }\n      }\n\n      this.errorBucket = errorBucket\n      this.valid = errorBucket.length === 0\n\n      return this.valid\n    },\n  },\n})\n","// Styles\nimport './VInput.sass'\n\n// Components\nimport VIcon from '../VIcon'\nimport VLabel from '../VLabel'\nimport VMessages from '../VMessages'\n\n// Mixins\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport Validatable from '../../mixins/validatable'\n\n// Utilities\nimport {\n  convertToUnit,\n  getSlot,\n  kebabCase,\n} from '../../util/helpers'\n\n// Types\nimport { VNode, VNodeData, PropType } from 'vue'\nimport mixins from '../../util/mixins'\n\nconst baseMixins = mixins(\n  BindsAttrs,\n  Validatable\n)\n\ninterface options extends InstanceType<typeof baseMixins> {\n  /* eslint-disable-next-line camelcase */\n  $_modelEvent: string\n}\n\n/* @vue/component */\nexport default baseMixins.extend<options>().extend({\n  name: 'v-input',\n\n  inheritAttrs: false,\n\n  props: {\n    appendIcon: String,\n    backgroundColor: {\n      type: String,\n      default: '',\n    },\n    dense: Boolean,\n    height: [Number, String],\n    hideDetails: Boolean,\n    hint: String,\n    id: String,\n    label: String,\n    loading: Boolean,\n    persistentHint: Boolean,\n    prependIcon: String,\n    value: null as any as PropType<any>,\n  },\n\n  data () {\n    return {\n      lazyValue: this.value,\n      hasMouseDown: false,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-input--has-state': this.hasState,\n        'v-input--hide-details': this.hideDetails,\n        'v-input--is-label-active': this.isLabelActive,\n        'v-input--is-dirty': this.isDirty,\n        'v-input--is-disabled': this.disabled,\n        'v-input--is-focused': this.isFocused,\n        'v-input--is-loading': this.loading !== false && this.loading !== undefined,\n        'v-input--is-readonly': this.readonly,\n        'v-input--dense': this.dense,\n        ...this.themeClasses,\n      }\n    },\n    computedId (): string {\n      return this.id || `input-${this._uid}`\n    },\n    hasHint (): boolean {\n      return !this.hasMessages &&\n        !!this.hint &&\n        (this.persistentHint || this.isFocused)\n    },\n    hasLabel (): boolean {\n      return !!(this.$slots.label || this.label)\n    },\n    // Proxy for `lazyValue`\n    // This allows an input\n    // to function without\n    // a provided model\n    internalValue: {\n      get (): any {\n        return this.lazyValue\n      },\n      set (val: any) {\n        this.lazyValue = val\n        this.$emit(this.$_modelEvent, val)\n      },\n    },\n    isDirty (): boolean {\n      return !!this.lazyValue\n    },\n    isDisabled (): boolean {\n      return this.disabled || this.readonly\n    },\n    isLabelActive (): boolean {\n      return this.isDirty\n    },\n  },\n\n  watch: {\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  beforeCreate () {\n    // v-radio-group needs to emit a different event\n    // https://github.com/vuetifyjs/vuetify/issues/4752\n    this.$_modelEvent = (this.$options.model && this.$options.model.event) || 'input'\n  },\n\n  methods: {\n    genContent () {\n      return [\n        this.genPrependSlot(),\n        this.genControl(),\n        this.genAppendSlot(),\n      ]\n    },\n    genControl () {\n      return this.$createElement('div', {\n        staticClass: 'v-input__control',\n      }, [\n        this.genInputSlot(),\n        this.genMessages(),\n      ])\n    },\n    genDefaultSlot () {\n      return [\n        this.genLabel(),\n        this.$slots.default,\n      ]\n    },\n    genIcon (\n      type: string,\n      cb?: (e: Event) => void\n    ) {\n      const icon = (this as any)[`${type}Icon`]\n      const eventName = `click:${kebabCase(type)}`\n\n      const data: VNodeData = {\n        props: {\n          color: this.validationState,\n          dark: this.dark,\n          disabled: this.disabled,\n          light: this.light,\n        },\n        on: !(this.listeners$[eventName] || cb)\n          ? undefined\n          : {\n            click: (e: Event) => {\n              e.preventDefault()\n              e.stopPropagation()\n\n              this.$emit(eventName, e)\n              cb && cb(e)\n            },\n            // Container has g event that will\n            // trigger menu open if enclosed\n            mouseup: (e: Event) => {\n              e.preventDefault()\n              e.stopPropagation()\n            },\n          },\n      }\n\n      return this.$createElement('div', {\n        staticClass: `v-input__icon v-input__icon--${kebabCase(type)}`,\n        key: type + icon,\n      }, [\n        this.$createElement(\n          VIcon,\n          data,\n          icon\n        ),\n      ])\n    },\n    genInputSlot () {\n      return this.$createElement('div', this.setBackgroundColor(this.backgroundColor, {\n        staticClass: 'v-input__slot',\n        style: { height: convertToUnit(this.height) },\n        on: {\n          click: this.onClick,\n          mousedown: this.onMouseDown,\n          mouseup: this.onMouseUp,\n        },\n        ref: 'input-slot',\n      }), [this.genDefaultSlot()])\n    },\n    genLabel () {\n      if (!this.hasLabel) return null\n\n      return this.$createElement(VLabel, {\n        props: {\n          color: this.validationState,\n          dark: this.dark,\n          focused: this.hasState,\n          for: this.computedId,\n          light: this.light,\n        },\n      }, this.$slots.label || this.label)\n    },\n    genMessages () {\n      if (this.hideDetails) return null\n\n      const messages = this.hasHint\n        ? [this.hint]\n        : this.validations\n\n      return this.$createElement(VMessages, {\n        props: {\n          color: this.hasHint ? '' : this.validationState,\n          dark: this.dark,\n          light: this.light,\n          value: (this.hasMessages || this.hasHint) ? messages : [],\n        },\n        attrs: {\n          role: this.hasMessages ? 'alert' : null,\n        },\n        scopedSlots: {\n          default: props => getSlot(this, 'message', props),\n        },\n      })\n    },\n    genSlot (\n      type: string,\n      location: string,\n      slot: (VNode | VNode[])[]\n    ) {\n      if (!slot.length) return null\n\n      const ref = `${type}-${location}`\n\n      return this.$createElement('div', {\n        staticClass: `v-input__${ref}`,\n        ref,\n      }, slot)\n    },\n    genPrependSlot () {\n      const slot = []\n\n      if (this.$slots.prepend) {\n        slot.push(this.$slots.prepend)\n      } else if (this.prependIcon) {\n        slot.push(this.genIcon('prepend'))\n      }\n\n      return this.genSlot('prepend', 'outer', slot)\n    },\n    genAppendSlot () {\n      const slot = []\n\n      // Append icon for text field was really\n      // an appended inner icon, v-text-field\n      // will overwrite this method in order to obtain\n      // backwards compat\n      if (this.$slots.append) {\n        slot.push(this.$slots.append)\n      } else if (this.appendIcon) {\n        slot.push(this.genIcon('append'))\n      }\n\n      return this.genSlot('append', 'outer', slot)\n    },\n    onClick (e: Event) {\n      this.$emit('click', e)\n    },\n    onMouseDown (e: Event) {\n      this.hasMouseDown = true\n      this.$emit('mousedown', e)\n    },\n    onMouseUp (e: Event) {\n      this.hasMouseDown = false\n      this.$emit('mouseup', e)\n    },\n  },\n\n  render (h): VNode {\n    return h('div', this.setTextColor(this.validationState, {\n      staticClass: 'v-input',\n      class: this.classes,\n    }), this.genContent())\n  },\n})\n","import VInput from './VInput'\n\nexport { VInput }\nexport default VInput\n","// Styles\nimport './VCounter.sass'\n\n// Mixins\nimport Themeable, { functionalThemeClasses } from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\n/* @vue/component */\nexport default mixins(Themeable).extend({\n  name: 'v-counter',\n\n  functional: true,\n\n  props: {\n    value: {\n      type: [Number, String],\n      default: '',\n    },\n    max: [Number, String],\n  },\n\n  render (h, ctx): VNode {\n    const { props } = ctx\n    const max = parseInt(props.max, 10)\n    const value = parseInt(props.value, 10)\n    const content = max ? `${value} / ${max}` : String(props.value)\n    const isGreater = max && (value > max)\n\n    return h('div', {\n      staticClass: 'v-counter',\n      class: {\n        'error--text': isGreater,\n        ...functionalThemeClasses(ctx),\n      },\n    }, content)\n  },\n})\n","import VCounter from './VCounter'\n\nexport { VCounter }\nexport default VCounter\n","// Styles\nimport './VTextField.sass'\n\n// Extensions\nimport VInput from '../VInput'\n\n// Components\nimport VCounter from '../VCounter'\nimport VLabel from '../VLabel'\n\n// Mixins\nimport Loadable from '../../mixins/loadable'\n\n// Directives\nimport ripple from '../../directives/ripple'\n\n// Utilities\nimport { convertToUnit, keyCodes } from '../../util/helpers'\nimport { breaking, consoleWarn } from '../../util/console'\n\n// Types\nimport mixins from '../../util/mixins'\nimport { VNode } from 'vue/types'\n\nconst baseMixins = mixins(\n  VInput,\n  Loadable\n)\ninterface options extends InstanceType<typeof baseMixins> {\n  $refs: {\n    label: HTMLElement\n    input: HTMLInputElement\n    'prepend-inner': HTMLElement\n    prefix: HTMLElement\n    suffix: HTMLElement\n  }\n}\n\nconst dirtyTypes = ['color', 'file', 'time', 'date', 'datetime-local', 'week', 'month']\n\n/* @vue/component */\nexport default baseMixins.extend<options>().extend({\n  name: 'v-text-field',\n\n  directives: { ripple },\n\n  inheritAttrs: false,\n\n  props: {\n    appendOuterIcon: String,\n    autofocus: Boolean,\n    clearable: Boolean,\n    clearIcon: {\n      type: String,\n      default: '$clear',\n    },\n    counter: [Boolean, Number, String],\n    filled: Boolean,\n    flat: Boolean,\n    fullWidth: Boolean,\n    label: String,\n    outlined: Boolean,\n    placeholder: String,\n    prefix: String,\n    prependInnerIcon: String,\n    reverse: Boolean,\n    rounded: Boolean,\n    shaped: Boolean,\n    singleLine: Boolean,\n    solo: Boolean,\n    soloInverted: Boolean,\n    suffix: String,\n    type: {\n      type: String,\n      default: 'text',\n    },\n  },\n\n  data: () => ({\n    badInput: false,\n    labelWidth: 0,\n    prefixWidth: 0,\n    prependWidth: 0,\n    initialValue: null,\n    isBooted: false,\n    isClearing: false,\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        ...VInput.options.computed.classes.call(this),\n        'v-text-field': true,\n        'v-text-field--full-width': this.fullWidth,\n        'v-text-field--prefix': this.prefix,\n        'v-text-field--single-line': this.isSingle,\n        'v-text-field--solo': this.isSolo,\n        'v-text-field--solo-inverted': this.soloInverted,\n        'v-text-field--solo-flat': this.flat,\n        'v-text-field--filled': this.filled,\n        'v-text-field--is-booted': this.isBooted,\n        'v-text-field--enclosed': this.isEnclosed,\n        'v-text-field--reverse': this.reverse,\n        'v-text-field--outlined': this.outlined,\n        'v-text-field--placeholder': this.placeholder,\n        'v-text-field--rounded': this.rounded,\n        'v-text-field--shaped': this.shaped,\n      }\n    },\n    counterValue (): number {\n      return (this.internalValue || '').toString().length\n    },\n    internalValue: {\n      get (): any {\n        return this.lazyValue\n      },\n      set (val: any) {\n        this.lazyValue = val\n        this.$emit('input', this.lazyValue)\n      },\n    },\n    isDirty (): boolean {\n      return (this.lazyValue != null &&\n        this.lazyValue.toString().length > 0) ||\n        this.badInput\n    },\n    isEnclosed (): boolean {\n      return (\n        this.filled ||\n        this.isSolo ||\n        this.outlined ||\n        this.fullWidth\n      )\n    },\n    isLabelActive (): boolean {\n      return this.isDirty || dirtyTypes.includes(this.type)\n    },\n    isSingle (): boolean {\n      return this.isSolo || this.singleLine || this.fullWidth\n    },\n    isSolo (): boolean {\n      return this.solo || this.soloInverted\n    },\n    labelPosition (): Record<'left' | 'right', string | number | undefined> {\n      let offset = (this.prefix && !this.labelValue) ? this.prefixWidth : 0\n\n      if (this.labelValue && this.prependWidth) offset -= this.prependWidth\n\n      return (this.$vuetify.rtl === this.reverse) ? {\n        left: offset,\n        right: 'auto',\n      } : {\n        left: 'auto',\n        right: offset,\n      }\n    },\n    showLabel (): boolean {\n      return this.hasLabel && (!this.isSingle || (!this.isLabelActive && !this.placeholder))\n    },\n    labelValue (): boolean {\n      return !this.isSingle &&\n        Boolean(this.isFocused || this.isLabelActive || this.placeholder)\n    },\n  },\n\n  watch: {\n    labelValue: 'setLabelWidth',\n    outlined: 'setLabelWidth',\n    label () {\n      this.$nextTick(this.setLabelWidth)\n    },\n    prefix () {\n      this.$nextTick(this.setPrefixWidth)\n    },\n    isFocused (val) {\n      // Sets validationState from validatable\n      this.hasColor = val\n\n      if (val) {\n        this.initialValue = this.lazyValue\n      } else if (this.initialValue !== this.lazyValue) {\n        this.$emit('change', this.lazyValue)\n      }\n    },\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('box')) {\n      breaking('box', 'filled', this)\n    }\n\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('browser-autocomplete')) {\n      breaking('browser-autocomplete', 'autocomplete', this)\n    }\n\n    /* istanbul ignore if */\n    if (this.shaped && !(this.filled || this.outlined || this.isSolo)) {\n      consoleWarn('shaped should be used with either filled or outlined', this)\n    }\n  },\n\n  mounted () {\n    this.autofocus && this.onFocus()\n    this.setLabelWidth()\n    this.setPrefixWidth()\n    this.setPrependWidth()\n    requestAnimationFrame(() => (this.isBooted = true))\n  },\n\n  methods: {\n    /** @public */\n    focus () {\n      this.onFocus()\n    },\n    /** @public */\n    blur (e?: Event) {\n      // https://github.com/vuetifyjs/vuetify/issues/5913\n      // Safari tab order gets broken if called synchronous\n      window.requestAnimationFrame(() => {\n        this.$refs.input && this.$refs.input.blur()\n      })\n    },\n    clearableCallback () {\n      this.$refs.input && this.$refs.input.focus()\n      this.$nextTick(() => this.internalValue = null)\n    },\n    genAppendSlot () {\n      const slot = []\n\n      if (this.$slots['append-outer']) {\n        slot.push(this.$slots['append-outer'] as VNode[])\n      } else if (this.appendOuterIcon) {\n        slot.push(this.genIcon('appendOuter'))\n      }\n\n      return this.genSlot('append', 'outer', slot)\n    },\n    genPrependInnerSlot () {\n      const slot = []\n\n      if (this.$slots['prepend-inner']) {\n        slot.push(this.$slots['prepend-inner'] as VNode[])\n      } else if (this.prependInnerIcon) {\n        slot.push(this.genIcon('prependInner'))\n      }\n\n      return this.genSlot('prepend', 'inner', slot)\n    },\n    genIconSlot () {\n      const slot = []\n\n      if (this.$slots['append']) {\n        slot.push(this.$slots['append'] as VNode[])\n      } else if (this.appendIcon) {\n        slot.push(this.genIcon('append'))\n      }\n\n      return this.genSlot('append', 'inner', slot)\n    },\n    genInputSlot () {\n      const input = VInput.options.methods.genInputSlot.call(this)\n\n      const prepend = this.genPrependInnerSlot()\n\n      if (prepend) {\n        input.children = input.children || []\n        input.children.unshift(prepend)\n      }\n\n      return input\n    },\n    genClearIcon () {\n      if (!this.clearable) return null\n\n      const icon = this.isDirty ? 'clear' : ''\n\n      return this.genSlot('append', 'inner', [\n        this.genIcon(\n          icon,\n          this.clearableCallback\n        ),\n      ])\n    },\n    genCounter () {\n      if (this.counter === false || this.counter == null) return null\n\n      const max = this.counter === true ? this.attrs$.maxlength : this.counter\n\n      return this.$createElement(VCounter, {\n        props: {\n          dark: this.dark,\n          light: this.light,\n          max,\n          value: this.counterValue,\n        },\n      })\n    },\n    genDefaultSlot () {\n      return [\n        this.genFieldset(),\n        this.genTextFieldSlot(),\n        this.genClearIcon(),\n        this.genIconSlot(),\n        this.genProgress(),\n      ]\n    },\n    genFieldset () {\n      if (!this.outlined) return null\n\n      return this.$createElement('fieldset', {\n        attrs: {\n          'aria-hidden': true,\n        },\n      }, [this.genLegend()])\n    },\n    genLabel () {\n      if (!this.showLabel) return null\n\n      const data = {\n        props: {\n          absolute: true,\n          color: this.validationState,\n          dark: this.dark,\n          disabled: this.disabled,\n          focused: !this.isSingle && (this.isFocused || !!this.validationState),\n          for: this.computedId,\n          left: this.labelPosition.left,\n          light: this.light,\n          right: this.labelPosition.right,\n          value: this.labelValue,\n        },\n      }\n\n      return this.$createElement(VLabel, data, this.$slots.label || this.label)\n    },\n    genLegend () {\n      const width = !this.singleLine && (this.labelValue || this.isDirty) ? this.labelWidth : 0\n      const span = this.$createElement('span', {\n        domProps: { innerHTML: '&#8203;' },\n      })\n\n      return this.$createElement('legend', {\n        style: {\n          width: !this.isSingle ? convertToUnit(width) : undefined,\n        },\n      }, [span])\n    },\n    genInput () {\n      const listeners = Object.assign({}, this.listeners$)\n      delete listeners['change'] // Change should not be bound externally\n\n      return this.$createElement('input', {\n        style: {},\n        domProps: {\n          value: this.lazyValue,\n        },\n        attrs: {\n          ...this.attrs$,\n          autofocus: this.autofocus,\n          disabled: this.disabled,\n          id: this.computedId,\n          placeholder: this.placeholder,\n          readonly: this.readonly,\n          type: this.type,\n        },\n        on: Object.assign(listeners, {\n          blur: this.onBlur,\n          input: this.onInput,\n          focus: this.onFocus,\n          keydown: this.onKeyDown,\n        }),\n        ref: 'input',\n      })\n    },\n    genMessages () {\n      if (this.hideDetails) return null\n\n      return this.$createElement('div', {\n        staticClass: 'v-text-field__details',\n      }, [\n        VInput.options.methods.genMessages.call(this),\n        this.genCounter(),\n      ])\n    },\n    genTextFieldSlot () {\n      return this.$createElement('div', {\n        staticClass: 'v-text-field__slot',\n      }, [\n        this.genLabel(),\n        this.prefix ? this.genAffix('prefix') : null,\n        this.genInput(),\n        this.suffix ? this.genAffix('suffix') : null,\n      ])\n    },\n    genAffix (type: 'prefix' | 'suffix') {\n      return this.$createElement('div', {\n        class: `v-text-field__${type}`,\n        ref: type,\n      }, this[type])\n    },\n    onBlur (e?: Event) {\n      this.isFocused = false\n      e && this.$nextTick(() => this.$emit('blur', e))\n    },\n    onClick () {\n      if (this.isFocused || this.disabled || !this.$refs.input) return\n\n      this.$refs.input.focus()\n    },\n    onFocus (e?: Event) {\n      if (!this.$refs.input) return\n\n      if (document.activeElement !== this.$refs.input) {\n        return this.$refs.input.focus()\n      }\n\n      if (!this.isFocused) {\n        this.isFocused = true\n        e && this.$emit('focus', e)\n      }\n    },\n    onInput (e: Event) {\n      const target = e.target as HTMLInputElement\n      this.internalValue = target.value\n      this.badInput = target.validity && target.validity.badInput\n    },\n    onKeyDown (e: KeyboardEvent) {\n      if (e.keyCode === keyCodes.enter) this.$emit('change', this.internalValue)\n\n      this.$emit('keydown', e)\n    },\n    onMouseDown (e: Event) {\n      // Prevent input from being blurred\n      if (e.target !== this.$refs.input) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n\n      VInput.options.methods.onMouseDown.call(this, e)\n    },\n    onMouseUp (e: Event) {\n      if (this.hasMouseDown) this.focus()\n\n      VInput.options.methods.onMouseUp.call(this, e)\n    },\n    setLabelWidth () {\n      if (!this.outlined || !this.$refs.label) return\n\n      this.labelWidth = this.$refs.label.scrollWidth * 0.75 + 6\n    },\n    setPrefixWidth () {\n      if (!this.$refs.prefix) return\n\n      this.prefixWidth = this.$refs.prefix.offsetWidth\n    },\n    setPrependWidth () {\n      if (!this.outlined || !this.$refs['prepend-inner']) return\n\n      this.prependWidth = this.$refs['prepend-inner'].offsetWidth\n    },\n  },\n})\n"],"sourceRoot":""}